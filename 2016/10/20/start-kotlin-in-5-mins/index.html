<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 只需五分钟，开始使用Kotlin开发Android · Barry's Blog</title><meta name="description" content="只需五分钟，开始使用Kotlin开发Android - Barry Zhang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="https://avatars0.githubusercontent.com/u/5143676?v=3&amp;s=466"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://barryhappy.github.io/atom.xml" title="Barry's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="https://avatars0.githubusercontent.com/u/5143676?v=3&amp;s=466"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/barryhappy" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="http://www.barryzhang.com/" target="_blank" class="nav-list-link">BARRYZHANG</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">只需五分钟，开始使用Kotlin开发Android</h1><div class="post-info">2016年10月20日</div><div class="post-content"><p>1：本文是一篇描述如何在Android上开始一个Kotlin的HelloWorld程序的说明文。<br>2：其实你如果你网络够给力的话，也许三分钟就可以了。当然网络不够给力，也可能十分钟还没整好~</p>
<p>好了，正文开始：<br><a id="more"></a></p>
<hr>
<p>对于开发者来说，我们正处于一个美好的时代。得益于互联网的发展、工具的进步，我们现在学习一门新技术的成本和难度都比过去低了很多。<br>假设你之前没有使用过Kotlin，那么从头开始写一个HelloWorld的app也只需要这么几步：</p>
<h2 id="首先，你要有一个Android-Studio。"><a href="#首先，你要有一个Android-Studio。" class="headerlink" title="首先，你要有一个Android Studio。"></a>首先，你要有一个Android Studio。</h2><p>我正在用的是2.2.1版本，其它版本应该也大同小异。 </p>
<h2 id="其次，安装一个Kotlin的插件。"><a href="#其次，安装一个Kotlin的插件。" class="headerlink" title="其次，安装一个Kotlin的插件。"></a>其次，安装一个Kotlin的插件。</h2><p>依次打开：Android Studio &gt; Preferences &gt; Plugins，然后选择『Browse repositories』，在搜索框中搜索Kotlin，结果列表中的『Kotlin』插件，就是我们要找的目标了。<br>点击安装，安装完成之后，重启Android Studio。<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y08iu63gj219s11e48p.jpg" alt="Kotlin插件"></p>
<h2 id="新建一个Android项目"><a href="#新建一个Android项目" class="headerlink" title="新建一个Android项目"></a>新建一个Android项目</h2><p>重新打开Android Studio，新建一个Android项目吧，添加一个默认的MainActivity<br>——像以前一样即可。</p>
<h2 id="Java-to-Kotlin"><a href="#Java-to-Kotlin" class="headerlink" title="Java to Kotlin"></a>Java to Kotlin</h2><p>安装完插件的AndroidStudio现在已经拥有开发Kotlin的新能力了，那么如何体现这个能力呢？<br>我们先来尝试它的转换功能：Java -&gt; Kotlin，可以把现有的java文件翻译成Kotlin文件。 </p>
<p>打开MainActivity文件，在Code菜单下面可以看到一个新的功能：Convert Java File to Kotlin File。<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y09xgixcj21080gkqaf.jpg" alt="Java to Kotlin"></p>
<p>点击转换，可以看到结果：<br>java文件：MainActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.barryzhang.kotlinhello;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>转换后的Kotlin文件：MainActivity.kt<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">package com.barryzhang.kotlinhello</div><div class="line"></div><div class="line">import android.support.v7.app.AppCompatActivity</div><div class="line">import android.os.Bundle</div><div class="line"></div><div class="line">class MainActivity : AppCompatActivity() &#123;</div><div class="line"></div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_main)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Kotlin的转换功能是十分实用的，对于我们重用过去的java代码、或者网上搜索到的java代码片段很有帮助。（当然，Kotlin是直接兼容java的，如果不想转换，也可以直接调用Java的方法）</p>
<h2 id="配置gradle文件"><a href="#配置gradle文件" class="headerlink" title="配置gradle文件"></a>配置gradle文件</h2><p>MainActivity已经被转换成了Kotlin实现，但是项目目前还不可以用，还需要配置一下，让项目支持grade的编译、运行。<br>当然，这一步也不需要我们做太多工作——在java转换成Kotlin之后，打开MainActivity.kt文件，编译器会提示”Kotlin not configured”，点击一下Configure按钮，IDE就会自动帮我们配置好了！（所以说Kotlin的工具完善可不是吹的，毕竟Kotlin的老爹JetBrains就是专门做工具的啊）<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y0akfdzij20l10eadj5.jpg" alt="Kotlin not configured"></p>
<p>这个自动配置，实际上是做了这些改动。<br>项目的build.gradle添加：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    ext.kotlin_version = <span class="string">'1.0.4'</span></div><div class="line">    dependencies &#123; </div><div class="line">        classpath <span class="string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://ww2.sinaimg.cn/large/801b780ajw1f8y0bg5kcuj20hj06nabf.jpg" alt="gradle1"><br>module里的build.gradle添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'kotlin-android'</span></div><div class="line">android &#123; </div><div class="line">    sourceSets &#123;</div><div class="line">        main.java.srcDirs += <span class="string">'src/main/kotlin'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">dependencies &#123; </div><div class="line">    compile <span class="string">"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"</span></div><div class="line">&#125;</div><div class="line">repositories &#123;</div><div class="line">    mavenCentral()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y0bhs2f7j20jx0ea0v9.jpg" alt="gradle2"></p>
<p>↑↑↑ 熟悉了之后自己手写也是阔以的。</p>
<h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><p>配置之后，等sync完成，就可以运行了~ （如果你sync失败或者耗时过长，赶紧检讨一下自己有没有科学上网？）<br><img src="http://ww4.sinaimg.cn/large/801b780ajw1f8y10t7bubj20bi0ktt98.jpg" alt="hello"><br>biu~起飞，欢迎来到新世界的大门。 </p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/10/21/why-we-need-kotlin/" class="prev">上一篇</a><a href="/2016/10/09/android-wireless-debug/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://barryhappy.github.io">Barry Zhang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>