<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Android开发：为什么要使用Kotlin？ · Barry's Blog</title><meta name="description" content="Android开发：为什么要使用Kotlin？ - Barry Zhang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="https://avatars0.githubusercontent.com/u/5143676?v=3&amp;s=466"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://barryhappy.github.io/atom.xml" title="Barry's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="https://avatars0.githubusercontent.com/u/5143676?v=3&amp;s=466"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/barryhappy" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="http://www.barryzhang.com/" target="_blank" class="nav-list-link">BARRYZHANG</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Android开发：为什么要使用Kotlin？</h1><div class="post-info">2016年10月21日</div><div class="post-content"><p>在使用Kotlin进行了一段时间的Android开发之后，我深深地体验到了它的美好，觉得是时候把它拿出来安利一下了。<br><a id="more"></a></p>
<h1 id="1-Kotlin是什么？"><a href="#1-Kotlin是什么？" class="headerlink" title="1. Kotlin是什么？"></a>1. Kotlin是什么？</h1><p>Kotlin是一门编程语言，由JetBrains公司开发的。JetBrains就是那个开发了无数个牛逼IDE的公司，Android Studio就是建立在他家的Intellij之上的。<br>Kotlin是基于JVM的，所以开发者可以什么方便地用它来进行Android开发——支持Kotlin和Java的混合编写。</p>
<h1 id="2-为什么要使用Kotlin？"><a href="#2-为什么要使用Kotlin？" class="headerlink" title="2. 为什么要使用Kotlin？"></a>2. 为什么要使用Kotlin？</h1><p>我觉得它之所以适合Android开发，主要是因为以下的特点：</p>
<h2 id="2-1-简洁、优雅"><a href="#2-1-简洁、优雅" class="headerlink" title="2.1 简洁、优雅"></a>2.1 简洁、优雅</h2><p>写了很多年的Java之后，再写Kotlin，真是觉得如沐春风。<br>除了<code>不用写分号</code>以及天然<code>支持Lambda表达式</code>之外，它的语法本身就比Java简洁许多。 </p>
<p>举几个小例子，比如，类型推导：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">val a : Int = <span class="number">1</span> <span class="comment">// 正常的声明、赋值</span></div><div class="line">val b = <span class="number">2</span> <span class="comment">// 类型推导，可以省略Int声明 </span></div><div class="line"></div><div class="line"><span class="comment">/* 定义函数：自动推导函数的返回值类型 */</span></div><div class="line">fun sum(a: Int, b: Int) = a + b</div></pre></td></tr></table></figure></p>
<p>字符串模板：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val name = <span class="string">"Barry"</span></div><div class="line">val age = <span class="number">15</span></div><div class="line">print(<span class="string">"My name is $&#123;name&#125;, I am $&#123;age&#125; "</span>)  <span class="comment">// 会打印出： My name is Barry, I am 15</span></div></pre></td></tr></table></figure></p>
<p>下面这个例子，可以对比体会一下他们的不同—— 遍历一个列表，打印其中的奇数。<br>如果用java写:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">List list = Arrays.asList(<span class="string">"H"</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">199</span>);</div><div class="line"><span class="keyword">for</span>(Object number : list)&#123;</div><div class="line">    <span class="keyword">if</span>(!(number <span class="keyword">instanceof</span>  Integer)) &#123;</div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>((Integer)number % <span class="number">2</span> == <span class="number">0</span>)&#123;</div><div class="line">        System.out.println((Integer)number);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>而用Kotlin的话，显然会更清晰、简洁、优雅（注意这里的lambda表达式）：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">val list = Arrays.asList(<span class="string">"H"</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">199</span>)</div><div class="line">list.filter &#123; it is Int &#125;</div><div class="line">        .filter &#123; it <span class="keyword">as</span> Int % <span class="number">2</span> != <span class="number">0</span> &#125;</div><div class="line">        .forEach &#123; println(it) &#125;</div></pre></td></tr></table></figure></p>
<p>在Kotlin中，诸如此类的语法糖还有很多：函数默认值、内联函数、ranges、kv遍历Map、lazy属性、数据对象声明、运算符重载…… 如果展开来说的话，每个都可以说很多。</p>
<p>当习惯这些之后，很容易就会有这种感觉：写Kotlin相比较写Java，就像高铁之于绿皮火车、iPhone之于山寨机、4K屏之于800*600……没有它之前觉得老的东西也能用，但是一旦习惯，再改回去的话就觉得浑身难受。 </p>
<p>另外，简洁的语法不仅使代码读起来清晰流畅，也让它自然<strong>简单易学</strong>——基本上花上半天时间，把官方文档看上一遍，就可以开始coding了。</p>
<h2 id="2-2-安全"><a href="#2-2-安全" class="headerlink" title="2.2 安全"></a>2.2 安全</h2><p>在Java里，我们常常要进行许多非空判断：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span> <span class="params">(String str)</span></span>&#123;</div><div class="line">   <span class="keyword">if</span>(str != <span class="keyword">null</span>) &#123;</div><div class="line">       System.out.println(<span class="string">"Length = "</span> + str.length());</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>而在Kotlin中，即使不进行这些额外的判断，代码也是健壮的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 如果str=null，会打印：Length = null</span></div><div class="line">fun fun1 (str: <span class="built_in">String</span>?) &#123;</div><div class="line">    println(<span class="string">"Length = "</span> + str?.length) </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有，Java中经常出现的ClassCastException，在Kotlin中，也可以通过安全的类型转换进行避免：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">val l2 = listOf(<span class="string">"A"</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="string">'c'</span>)</div><div class="line">l2.forEach &#123; println(it <span class="keyword">as</span>? Int) &#125;</div></pre></td></tr></table></figure></p>
<h2 id="2-3-函数、属性扩展"><a href="#2-3-函数、属性扩展" class="headerlink" title="2.3 函数、属性扩展"></a>2.3 函数、属性扩展</h2><p>Kotlin提供了一种方法——可以在既不需要继承父类，也不需要使用类似装饰器设计模式的情况下，对类进行扩展。简直是黑科技！<br>比如，给String类添加一个扩展方法，用以返回它的第一个字符。只需要这样：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 函数扩展</span></div><div class="line">fun <span class="built_in">String</span>.firstChar() : <span class="built_in">String</span>? &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">if</span>(<span class="keyword">this</span>.length &gt; <span class="number">0</span>) <span class="keyword">this</span>.substring(<span class="number">0</span>,<span class="number">1</span>) <span class="keyword">else</span> <span class="string">"NULL"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个扩展函数可以在任何地方声明，然后其他任何地方String对象就都可以使用这个方法了:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val s = <span class="string">"Hello"</span>.firstChar())  <span class="comment">// s的值为"H"</span></div><div class="line">println(<span class="string">"你好"</span>.firstChar())   <span class="comment">// 打印： 你</span></div><div class="line">println(<span class="string">""</span>.firstChar())   <span class="comment">// 打印： NULL</span></div></pre></td></tr></table></figure></p>
<h2 id="2-4-兼容Java"><a href="#2-4-兼容Java" class="headerlink" title="2.4 兼容Java"></a>2.4 兼容Java</h2><p>一个语言能否被广泛使用，除了它本身要好用之外，还要有一个良好的生态。 尤其在是如今，各种应用层的开发实际上很依赖于各种开源库、第三方组件等，如果一个应用层的语言没有这些支持的话，是很难被广泛使用的。<br>而对于Kotlin来说，这个问题是不存在的，因为它跟Java是无缝连接的，可以相互操作。<br>这意味着：</p>
<ul>
<li>Kotlin可以使用所有用Java写的组件：（RxJava、Retrofit、EventBus、Fresco……这些都不是问题！）</li>
<li>在现有的用Java写的项目中可以局部使用Kotlin，混合开发</li>
<li>Java-&gt;Kotlin，可以逐步迁移而不是非黑即白</li>
<li>使用Kotlin开发时，万一遇到问题，可以瞬间切换回Java~  </li>
</ul>
<h2 id="2-5-工具完善"><a href="#2-5-工具完善" class="headerlink" title="2.5 工具完善"></a>2.5 工具完善</h2><p>来，我们再理一下这个关系树：<br>JetBrains<br>|–&gt; Intellij IDEA –&gt; Android Studio<br>|–&gt; Kotlin<br>Kotlin是JetBrains公司出的；JetBrains向来以做各种牛逼的IDE著称；Android的官方开发工具AndroidStudio就是基于JetBrains公司出品的Intellij改造的。<br>↑ 以上是背景。<br>从实际体验角度来说，Kotlin的开发也是十分方便快捷的。<br>只需花几分钟给AndroidStudio安装一个Kotlin的扩展插件，就可以迅速开始体验使用Kotlin的快感了。<br>一开始的时候，你甚至都不需要会使用Kotlin！这是因为Kotlin插件提供了一个Java-&gt;Kotlin的转换功能，可以一键把现有的Java代码转换为Kotlin代码，你可以通过阅读它转换后的Kotlin代码，进行学习。<br>（实际上，我在学习Kotlin的时候，就大量使用了这种方法：当我不知道某个功能用Kotlin怎么写的时候，就会先用Java把它写出来，然后使用转换功能，生成Kotlin代码，从而就知道了Kotlin的写法）</p>
<h1 id="3-如何开始"><a href="#3-如何开始" class="headerlink" title="3. 如何开始"></a>3. 如何开始</h1><p>因为是一篇纯粹的说明文，所以我把如何开始单独抽离出来，写了这篇文章：《只需五分钟，开始使用Kotlin开发Android》<br>☞ 链接看这里：<br><a href="http://www.barryzhang.com/archives/476" target="_blank" rel="external">http://www.barryzhang.com/archives/476</a><br><a href="http://www.jianshu.com/p/5fa2c1eda64c" target="_blank" rel="external">http://www.jianshu.com/p/5fa2c1eda64c</a></p>
<h1 id="其他："><a href="#其他：" class="headerlink" title="其他："></a>其他：</h1><p>有用的链接们：</p>
<ul>
<li><a href="https://kotlinlang.org/" target="_blank" rel="external">Kotlin官网</a>  <a href="http://kotlinlang.cn/" target="_blank" rel="external">Kotlin官网：中文</a></li>
<li><a href="https://huanglizhuo.gitbooks.io/kotlin-in-chinese" target="_blank" rel="external">Kotlin in Chinese</a><br>中文翻译的Kotlin官方文档 by @huanglizhuo。<br><a href="http://kotlindoc.com/" target="_blank" rel="external">另一个地址</a>，访问速度会略快一些。</li>
<li><a href="https://github.com/wangjiegulu/kotlin-for-android-developers-zh/blob/master/SUMMARY.md" target="_blank" rel="external">中文版：Kotlin for Android Developers</a></li>
<li><a href="https://github.com/barryhappy/Gank.Kotlin" target="_blank" rel="external">厚着脸皮放一个自己的Kotlin项目</a></li>
<li><a href="https://www.zhihu.com/question/25289041" target="_blank" rel="external">如何评价 Kotlin 语言？——知乎</a> </li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=404087761&amp;idx=1&amp;sn=d80625ee52f860a7a2ed4c238d2151b6" target="_blank" rel="external">Android开发必备知识：为什么说Kotlin值得一试</a> </li>
</ul>
<hr>
<p>关于作者 :<br><a href="http://www.barryzhang.com" target="_blank" rel="external">http://www.barryzhang.com</a><br><a href="https://barryhappy.github.io">https://barryhappy.github.io</a><br><a href="http://www.jianshu.com/users/e4607fd59d0d/latest_articles" target="_blank" rel="external">http://www.jianshu.com/users/e4607fd59d0d/latest_articles</a><br><a href="http://blog.csdn.net/barryhappy" target="_blank" rel="external">http://blog.csdn.net/barryhappy</a></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/10/26/what-if-keyboard-hide-input-view/" class="prev">上一篇</a><a href="/2016/10/20/start-kotlin-in-5-mins/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://barryhappy.github.io">Barry Zhang</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>