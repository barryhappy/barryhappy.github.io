<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Barry&#39;s Blog</title>
  <subtitle>å¼ æ–°å¼ºçš„åšå®¢</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://barryhappy.github.io/"/>
  <updated>2016-10-26T15:57:33.000Z</updated>
  <id>http://barryhappy.github.io/</id>
  
  <author>
    <name>Barry Zhang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Androidè½¯é”®ç›˜æŒ¡ä½è¾“å…¥æ¡†çš„é—®é¢˜ï¼Œç»ˆæè§£å†³æ–¹æ¡ˆ</title>
    <link href="http://barryhappy.github.io/2016/10/26/what-if-keyboard-hide-input-view/"/>
    <id>http://barryhappy.github.io/2016/10/26/what-if-keyboard-hide-input-view/</id>
    <published>2016-10-26T15:26:43.000Z</published>
    <updated>2016-10-26T15:57:33.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¼€å‘åšå¾—ä¹…äº†ï¼Œæ€»å…ä¸äº†ä¼šé‡åˆ°å„ç§å‘ã€‚<br>è€Œåœ¨Androidå¼€å‘çš„è·¯ä¸Šï¼Œã€è½¯é”®ç›˜æŒ¡ä½äº†è¾“å…¥æ¡†ã€è¿™ä¸ªå‘ï¼Œå¯è°“æ˜¯ä¸€ä¸ªæ—·æ—¥æŒä¹…çš„å·¨å‘â€”â€”æ¥æ¥æ¥ï¼Œæˆ‘ä»¬æ…¢æ…¢çœ‹ã€‚</p>
<a id="more"></a> 
<h1 id="å…¥é—¨ç¯‡"><a href="#å…¥é—¨ç¯‡" class="headerlink" title="å…¥é—¨ç¯‡"></a>å…¥é—¨ç¯‡</h1><p><img src="http://barryzhang.qiniudn.com/QQ20161024-0.png" alt="Base"></p>
<p>æœ€åŸºæœ¬çš„æƒ…å†µï¼Œå¦‚å›¾æ‰€ç¤ºï¼šåœ¨é¡µé¢åº•éƒ¨æœ‰ä¸€ä¸ªEditTextï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œé‚£ä¹ˆåœ¨è½¯é”®ç›˜å¼¹å‡ºçš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½ä¼šæŒ¡ä½EditTextã€‚<br>å¯¹äºè¿™ç§æƒ…å†µçš„å¤„ç†å…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨AndroidManifestæ–‡ä»¶ä¸­å¯¹activityè®¾ç½®ï¼š<code>android:windowSoftInputMode</code>çš„å€¼<code>adjustPan</code>æˆ–è€…<code>adjustResize</code>å³å¯ï¼Œåƒè¿™æ ·ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line">	<span class="attr">android:name</span>=<span class="string">".MainActivity"</span></div><div class="line">	<span class="attr">android:windowSoftInputMode</span>=<span class="string">"adjustPan"</span>  &gt;</div><div class="line">    ...</div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä»–ä»¬éƒ½å¯ä»¥è§£å†³é—®é¢˜ï¼Œå½“ç„¶ï¼Œ<code>adjustPan</code>è·Ÿ<code>adjustResize</code>çš„æ•ˆæœç•¥æœ‰åŒºåˆ«ã€‚ </p>
<ul>
<li><code>adjustPan</code>æ˜¯æŠŠæ•´ä¸ªç•Œé¢å‘ä¸Šå¹³ç§»ï¼Œä½¿è¾“å…¥æ¡†éœ²å‡ºï¼Œä¸ä¼šæ”¹å˜ç•Œé¢çš„å¸ƒå±€ï¼›</li>
<li><code>adjustResize</code>åˆ™æ˜¯é‡æ–°è®¡ç®—å¼¹å‡ºè½¯é”®ç›˜ä¹‹åçš„ç•Œé¢å¤§å°ï¼Œç›¸å½“äºæ˜¯ç”¨æ›´å°‘çš„ç•Œé¢åŒºåŸŸå»æ˜¾ç¤ºå†…å®¹ï¼Œè¾“å…¥æ¡†ä¸€èˆ¬è‡ªç„¶ä¹Ÿå°±åœ¨å†…äº†ã€‚</li>
</ul>
<p>â†‘â†‘â†‘ OKï¼Œè¿™åªæ˜¯å…¥é—¨ï¼ŒåŸºæœ¬ä¸Šåœ°çƒä¸Šæ‰€æœ‰çš„Androidå·¥ç¨‹å¸ˆéƒ½èƒ½æå®šã€‚<br>åˆ«æ€¥ï¼Œçœ‹ä¸‹é¢~</p>
<h1 id="åŠ ä¸ŠWebViewè¯•è¯•çœ‹ï¼Ÿå‘æ¥äº†â€¦â€¦"><a href="#åŠ ä¸ŠWebViewè¯•è¯•çœ‹ï¼Ÿå‘æ¥äº†â€¦â€¦" class="headerlink" title="åŠ ä¸ŠWebViewè¯•è¯•çœ‹ï¼Ÿå‘æ¥äº†â€¦â€¦"></a>åŠ ä¸ŠWebViewè¯•è¯•çœ‹ï¼Ÿå‘æ¥äº†â€¦â€¦</h1><h2 id="æƒ…å†µæè¿°"><a href="#æƒ…å†µæè¿°" class="headerlink" title="æƒ…å†µæè¿°"></a>æƒ…å†µæè¿°</h2><p>ä¸Šé¢çš„å…¥é—¨ç¯‡ä¸­ï¼Œè½¯é”®ç›˜æ˜¯ç”±åŸç”Ÿçš„EditTextè§¦å‘å¼¹å‡ºçš„ã€‚è€Œåœ¨H5ã€Hybridå‡ ä¹å·²ç»æˆä¸ºAppæ ‡é…çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸è¿˜ä¼šç¢°åˆ°çš„æƒ…å†µæ˜¯ï¼š<strong>è½¯é”®ç›˜æ˜¯ç”±WebViewä¸­çš„ç½‘é¡µå…ƒç´ æ‰€è§¦å‘å¼¹å‡ºçš„</strong>ã€‚  </p>
<p>è¿™æ—¶å€™ï¼Œæƒ…å†µå°±ä¼šå˜å¾—å¤æ‚äº†: </p>
<ol>
<li>é¦–å…ˆï¼Œé¡µé¢æ˜¯<code>éå…¨å±æ¨¡å¼</code>çš„æƒ…å†µä¸‹ï¼Œç»™activityè®¾ç½®<code>adjustPan</code>ä¼šå¤±æ•ˆã€‚</li>
<li>å…¶æ¬¡ï¼Œé¡µé¢æ˜¯<code>å…¨å±æ¨¡å¼</code>çš„æƒ…å†µï¼Œ<code>adjustPan</code>è·Ÿ<code>adjustResize</code>éƒ½ä¼šå¤±æ•ˆã€‚</li>
</ol>
<p>â€”â€”è§£é‡Šä¸€ä¸‹ï¼Œè¿™é‡Œçš„<code>å…¨å±æ¨¡å¼</code>å³æ˜¯é¡µé¢æ˜¯å…¨å±çš„ï¼ŒåŒ…æ‹¬Applicationæˆ–activityä½¿ç”¨äº†Fullscreenä¸»é¢˜ã€ä½¿ç”¨äº†ã€çŠ¶æ€è‰²ç€è‰²ã€ã€ã€æ²‰æµ¸å¼çŠ¶æ€æ ã€ã€ã€Immersive Modeã€ç­‰ç­‰â€”â€”æ€»ä¹‹ï¼ŒåŸºæœ¬ä¸Šåªè¦æ˜¯Appè‡ªå·±æ¥ç®¡äº†çŠ¶æ€æ çš„æ§åˆ¶ï¼Œå°±ä¼šäº§ç”Ÿè¿™ç§é—®é¢˜ã€‚ </p>
<p>ä¸‹é¢è¿™ä¸ªè¡¨æ ¼å¯ä»¥ç®€å•åˆ—ä¸¾äº†å…·ä½“çš„æƒ…å†µã€‚ </p>
<p><img src="http://barryzhang.qiniudn.com/14773156950939.jpg" alt="è¡¨æ ¼"></p>
<h2 id="ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸ªå‘ï¼Ÿâ€issue-5497â€"><a href="#ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸ªå‘ï¼Ÿâ€issue-5497â€" class="headerlink" title="ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸ªå‘ï¼Ÿâ€issue 5497â€"></a>ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸ªå‘ï¼Ÿâ€issue 5497â€</h2><p>ä¸Šé¢è¡¨æ ¼çš„è¿™ç§æƒ…å†µå¹¶éæ˜¯Googleæ‰€æœŸæœ›çš„ï¼Œç†æƒ³çš„æƒ…å†µå½“ç„¶æ˜¯å®ƒä»¬éƒ½èƒ½æ­£å¸¸ç”Ÿæ•ˆæ‰å¯¹â€”â€”æ‰€ä»¥è¿™å…¶å®æ˜¯Androidç³»ç»Ÿæœ¬èº«çš„ä¸€ä¸ªBUGã€‚ </p>
<p>ä¸ºä»€ä¹ˆæ–‡ç« å¼€å¤´è¯´è¿™æ˜¯ä¸ªå‘å‘¢ï¼Ÿ<br>â€”â€”å› ä¸ºè¿™ä¸ªBUGä»Android1.xæ—¶ä»£ï¼ˆ2009å¹´ï¼‰å°±è¢«æŠ¥å‘Šäº†ï¼Œè€Œä¸€ç›´åˆ°äº†å¦‚ä»Šçš„Android7.0ï¼ˆ2016å¹´ï¼‰è¿˜æ˜¯æ²¡æœ‰ä¿®å¤â€¦â€¦/(ã„’oã„’)/<br>å¯ä»¥è¯´è¿™ä¸ä»…æ˜¯ä¸ªå‘ï¼Œè€Œä¸”è¿˜æ˜¯ä¸ªå®˜æ–¹æŒ–çš„å‘~</p>
<p>â€œissue 5497â€ï¼Œè¯¦æƒ…ä¼ é€é—¨ â˜ <a href="https://code.google.com/p/android/issues/detail?id=5497" target="_blank" rel="external">Issue 5497 - android -WebView adjustResize windowSoftInputMode breaks when activity is fullscreen - Android Open Source Project - Issue Tracker - Google Project Hosting</a></p>
<p>å½“ç„¶äº†ï¼Œä¸ç®¡å‘æ˜¯è°æŒ–çš„ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦å¼€å‘è€…æ¥è§£å†³ã€‚</p>
<p>é‡åˆ°å‘ä¹‹åï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è¿‡å»ï¼šèº²ï¼Œæˆ–è€…å¡«ã€‚</p>
<h1 id="èº²å‘å§¿åŠ¿"><a href="#èº²å‘å§¿åŠ¿" class="headerlink" title="èº²å‘å§¿åŠ¿"></a>èº²å‘å§¿åŠ¿</h1><p>å¦‚å‰æ–‡æ‰€ç¤ºï¼Œå‡ºç°å‘çš„æ¡ä»¶æ˜¯ï¼šå¸¦æœ‰WebViewçš„activityä½¿ç”¨äº†<code>å…¨å±æ¨¡å¼</code>æˆ–è€…<code>adjustPan</code>æ¨¡å¼ã€‚<br>é‚£ä¹ˆèº²å‘çš„å§¿åŠ¿å°±å¾ˆç®€å•äº†â€”â€”<br>    <strong>å¦‚æœactivityä¸­æœ‰WebViewï¼Œå°±ä¸è¦ä½¿ç”¨<code>å…¨å±æ¨¡å¼</code>ï¼Œå¹¶ä¸”æŠŠå®ƒçš„windowSoftInputModeå€¼è®¾ä¸º<code>adjustResize</code>å°±å¥½äº†å˜›</strong></p>
<p>æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸğŸ˜‘<br><img src="http://barryzhang.qiniudn.com/20130927092846557.jpg" alt="20130927092846557"></p>
<h1 id="å¡«å‘å§¿åŠ¿"><a href="#å¡«å‘å§¿åŠ¿" class="headerlink" title="å¡«å‘å§¿åŠ¿"></a>å¡«å‘å§¿åŠ¿</h1><p>ä½†æ€»æœ‰äº›æ—¶å€™ï¼Œæ˜¯éœ€è¦<code>å…¨å±æ¨¡å¼</code>è·ŸWebViewå…¼å¾—çš„ï¼Œè¿™æ—¶å€™ï¼Œèº²å‘å°±ä¸è¡Œäº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„å¡«å‘çš„å§¿åŠ¿ã€‚å¹¸å¥½ï¼Œå¼€å‘è€…çš„æ™ºæ…§æ˜¯æ— ç©·çš„ï¼Œè¿™ä¸ªå‘å‡ºç°äº†è¿™ä¹ˆå¤šå¹´ï¼Œè¿˜æ˜¯æœ‰äººæ‰¾åˆ°äº†ä¸€äº›è§£å†³æ–¹æ¡ˆçš„ã€‚ </p>
<h2 id="AndroidBug5497Workaround"><a href="#AndroidBug5497Workaround" class="headerlink" title="AndroidBug5497Workaround"></a>AndroidBug5497Workaround</h2><p>æˆ‘ä¸ªäººè®¤ä¸ºæœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯è¿™ä¸ªï¼š<a href="http://stackoverflow.com/a/19494006" target="_blank" rel="external">AndroidBug5497Workaround</a>ï¼Œåªéœ€è¦ä¸€ä¸ªç¥å¥‡çš„<code>AndroidBug5497Workaround</code>ç±»ã€‚</p>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>æŠŠ<code>AndroidBug5497Workaround</code>ç±»å¤åˆ¶åˆ°é¡¹ç›®ä¸­</li>
<li>åœ¨éœ€è¦å¡«å‘çš„activityçš„onCreateæ–¹æ³•ä¸­æ·»åŠ ä¸€å¥<code>AndroidBug5497Workaround.assistActivity(this)</code>å³å¯ã€‚  </li>
</ol>
<p>ç»è¿‡æµ‹è¯•ï¼ŒåŸºæœ¬åœ¨å„ä¸ªAndroidç‰ˆæœ¬ä¸Šéƒ½å¯ç”¨ï¼Œæ•ˆæœåŸºæœ¬ä¸è®¾ç½®äº†<code>adjustResize</code>ç›¸å½“ã€‚<br>çœ‹ä¸€ä¸ªå¯¹æ¯”å›¾ï¼š<br><img src="http://barryzhang.qiniudn.com/webview-compare.jpg" alt="æ•ˆæœå¯¹æ¯”å›¾"></p>
<p>æ¥è‡ªæˆ‘å‚Appçš„æŸä¸ªä½¿ç”¨WebViewçš„<code>å…¨å±æ¨¡å¼</code>Activityé¡µé¢ï¼Œä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ï¼šæ²¡æœ‰è½¯é”®ç›˜çš„æ ·å¼ã€è½¯é”®ç›˜æŒ¡ä½è¾“å…¥æ¡†çš„æ•ˆæœã€ä»¥åŠä½¿ç”¨AndroidBug5497Workaroundä¹‹åçš„æœ€ç»ˆæ•ˆæœã€‚</p>
<h2 id="å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>å®ƒçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>è¿™ä¸ªç‚«é…·AndroidBug5497Workaroundç±»ï¼Œå…¶å®å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œåªæœ‰å‡ åè¡Œä»£ç ï¼Œå…ˆè´´åœ¨è¿™é‡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AndroidBug5497Workaround</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// For more information, see https://code.google.com/p/android/issues/detail?id=5497</span></div><div class="line">    <span class="comment">// To use this class, simply invoke assistActivity() on an Activity that already has its content view set.</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">assistActivity</span> <span class="params">(Activity activity)</span> </span>&#123;</div><div class="line">        <span class="keyword">new</span> AndroidBug5497Workaround(activity);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> View mChildOfContent;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> usableHeightPrevious;</div><div class="line">    <span class="keyword">private</span> FrameLayout.LayoutParams frameLayoutParams;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">AndroidBug5497Workaround</span><span class="params">(Activity activity)</span> </span>&#123;</div><div class="line">        FrameLayout content = (FrameLayout) activity.findViewById(android.R.id.content);</div><div class="line">        mChildOfContent = content.getChildAt(<span class="number">0</span>);</div><div class="line">        mChildOfContent.getViewTreeObserver().addOnGlobalLayoutListener(<span class="keyword">new</span> ViewTreeObserver.OnGlobalLayoutListener() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onGlobalLayout</span><span class="params">()</span> </span>&#123;</div><div class="line">                possiblyResizeChildOfContent();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        frameLayoutParams = (FrameLayout.LayoutParams) mChildOfContent.getLayoutParams();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">possiblyResizeChildOfContent</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> usableHeightNow = computeUsableHeight();</div><div class="line">        <span class="keyword">if</span> (usableHeightNow != usableHeightPrevious) &#123;</div><div class="line">            <span class="keyword">int</span> usableHeightSansKeyboard = mChildOfContent.getRootView().getHeight();</div><div class="line">            <span class="keyword">int</span> heightDifference = usableHeightSansKeyboard - usableHeightNow;</div><div class="line">            <span class="keyword">if</span> (heightDifference &gt; (usableHeightSansKeyboard/<span class="number">4</span>)) &#123;</div><div class="line">                <span class="comment">// keyboard probably just became visible</span></div><div class="line">                frameLayoutParams.height = usableHeightSansKeyboard - heightDifference;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="comment">// keyboard probably just became hidden</span></div><div class="line">                frameLayoutParams.height = usableHeightSansKeyboard;</div><div class="line">            &#125;</div><div class="line">            mChildOfContent.requestLayout();</div><div class="line">            usableHeightPrevious = usableHeightNow;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">computeUsableHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">        Rect r = <span class="keyword">new</span> Rect();</div><div class="line">        mChildOfContent.getWindowVisibleDisplayFrame(r);</div><div class="line">        <span class="keyword">return</span> (r.bottom - r.top);<span class="comment">// å…¨å±æ¨¡å¼ä¸‹ï¼š return r.bottom</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»£ç å¤§è‡´æ˜¯åšäº†è¿™ä¹ˆå‡ ä»¶äº‹ï¼š </p>
<h3 id="1-æ‰¾åˆ°activityçš„æ ¹View"><a href="#1-æ‰¾åˆ°activityçš„æ ¹View" class="headerlink" title="1.æ‰¾åˆ°activityçš„æ ¹View"></a>1.æ‰¾åˆ°activityçš„æ ¹View</h3><p>çœ‹ä¸€ä¸‹å…¥å£çš„ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">FrameLayout content = (FrameLayout) activity.findViewById(android.R.id.content);</div><div class="line">mChildOfContent = content.getChildAt(<span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<p>å…¶ä¸­ï¼Œç¬¬ä¸€è¡Œä¸­çš„<code>android.R.id.content</code>æ‰€æŒ‡çš„Viewï¼Œæ˜¯Androidæ‰€æœ‰Activityç•Œé¢ä¸Šå¼€å‘è€…æ‰€èƒ½æ§åˆ¶çš„åŒºåŸŸçš„æ ¹Viewã€‚</p>
<blockquote>
<ul>
<li>å¦‚æœActivityæ˜¯<code>å…¨å±æ¨¡å¼</code>ï¼Œé‚£ä¹ˆandroid.R.id.contentå°±æ˜¯å æ»¡å…¨éƒ¨å±å¹•åŒºåŸŸçš„ã€‚</li>
<li>å¦‚æœActivityæ˜¯æ™®é€šçš„<code>éå…¨å±æ¨¡å¼</code>ï¼Œé‚£ä¹ˆandroid.R.id.contentå°±æ˜¯å æ»¡é™¤çŠ¶æ€æ ä¹‹å¤–çš„æ‰€æœ‰åŒºåŸŸã€‚</li>
<li>å…¶ä»–æƒ…å†µï¼Œå¦‚Activityæ˜¯å¼¹çª—ã€æˆ–è€…7.0ä»¥åçš„åˆ†å±æ ·å¼ç­‰ï¼Œandroid.R.id.contentä¹Ÿæ˜¯å¼¹çª—çš„èŒƒå›´æˆ–è€…åˆ†å±æ‰€åœ¨çš„åŠä¸ªå±å¹•â€”â€”è¿™äº›æƒ…å†µè¾ƒå°‘ï¼Œå°±æš‚ä¸”ä¸è€ƒè™‘äº†ã€‚</li>
</ul>
</blockquote>
<p>æˆ‘ä»¬ç»å¸¸ç”¨çš„setContentView(View view)/setContent(int layRes)å…¶å®å°±æ˜¯æŠŠæˆ‘ä»¬æŒ‡å®šçš„Viewæˆ–è€…layResæ”¾åˆ°android.R.id.contenté‡Œé¢ï¼Œæˆä¸ºå®ƒçš„å­Viewã€‚</p>
<p>æ‰€ä»¥ï¼Œç„¶åï¼Œç¬¬äºŒè¡Œcontent.getChildAt(0)è·å–åˆ°çš„<code>mChildOfContent</code>ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ç”¨ä»¥è·å–åˆ°æˆ‘ä»¬ç”¨setContentViewæ”¾è¿›å»çš„Viewã€‚</p>
<h3 id="2-è®¾ç½®ä¸€ä¸ªListenerç›‘å¬Viewæ ‘å˜åŒ–"><a href="#2-è®¾ç½®ä¸€ä¸ªListenerç›‘å¬Viewæ ‘å˜åŒ–" class="headerlink" title="2.è®¾ç½®ä¸€ä¸ªListenerç›‘å¬Viewæ ‘å˜åŒ–"></a>2.è®¾ç½®ä¸€ä¸ªListenerç›‘å¬Viewæ ‘å˜åŒ–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mChildOfContent.getViewTreeObserver().addOnGlobalLayoutListener(&#123; <span class="comment">//ç®€åŒ–äº†å†™æ³•</span></div><div class="line">        possiblyResizeChildOfContent();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>View.getViewTreeObserver()å¯ä»¥è·å–ä¸€ä¸ª<code>ViewTreeObserver</code>å¯¹è±¡â€”â€”è¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œä¸“é—¨ç”¨ä»¥ç›‘å¬å½“å‰Viewæ ‘æ‰€å‘ç”Ÿçš„ä¸€äº›å˜åŒ–ã€‚è¿™é‡Œæ‰€æ³¨å†Œçš„<code>addOnGlobalLayoutListener</code>ï¼Œå°±æ˜¯ä¼šåœ¨å½“å‰çš„Viewæ ‘çš„å…¨å±€å¸ƒå±€ï¼ˆGlobalLayoutï¼‰å‘ç”Ÿå˜åŒ–ã€æˆ–è€…å…¶ä¸­çš„Viewå¯è§†çŠ¶æ€æœ‰å˜åŒ–æ—¶ï¼Œè¿›è¡Œé€šçŸ¥å›è°ƒã€‚</p>
<p>â€”â€”<strong>ã€è½¯é”®ç›˜å¼¹å‡ºã€ï¼Œåˆ™æ˜¯ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶çš„ä¸€ä¸ªæºã€‚</strong> (è½¯é”®ç›˜å¼¹å‡ºä¼šä½¿GlobalLayoutå‘ç”Ÿå˜åŒ–)</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨èƒ½ç›‘å¬åˆ°ã€è½¯é”®ç›˜å¼¹å‡ºã€çš„äº‹ä»¶äº†ã€‚ </p>
<h3 id="3-ç•Œé¢å˜åŒ–ä¹‹åï¼Œè·å–â€å¯ç”¨é«˜åº¦â€"><a href="#3-ç•Œé¢å˜åŒ–ä¹‹åï¼Œè·å–â€å¯ç”¨é«˜åº¦â€" class="headerlink" title="3.ç•Œé¢å˜åŒ–ä¹‹åï¼Œè·å–â€å¯ç”¨é«˜åº¦â€"></a>3.ç•Œé¢å˜åŒ–ä¹‹åï¼Œè·å–â€å¯ç”¨é«˜åº¦â€</h3><p>å½“è½¯é”®ç›˜å¼¹å‡ºäº†ä¹‹åï¼Œæ¥ä¸‹æ¥çš„äº‹æƒ…æ˜¯è·å–æ”¹å˜ä¹‹åçš„ç•Œé¢çš„<code>å¯ç”¨é«˜åº¦</code>ï¼ˆå¯ä»¥è¢«å¼€å‘è€…ç”¨ä»¥æ˜¾ç¤ºå†…å®¹çš„é«˜åº¦ï¼‰ã€‚<br>ç›´æ¥çœ‹ä»£ç ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">computeUsableHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">    Rect rect = <span class="keyword">new</span> Rect();</div><div class="line">    mChildOfContent.getWindowVisibleDisplayFrame(rect);</div><div class="line">    <span class="comment">// rect.topå…¶å®æ˜¯çŠ¶æ€æ çš„é«˜åº¦ï¼Œå¦‚æœæ˜¯å…¨å±ä¸»é¢˜ï¼Œç›´æ¥ return rect.bottomå°±å¯ä»¥äº†</span></div><div class="line">    <span class="keyword">return</span> (rect.bottom - rect.top);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>View.getWindowVisibleDisplayFrame(Rect rect)ï¼Œè¿™è¡Œä»£ç èƒ½å¤Ÿè·å–åˆ°çš„Rectâ€”â€”å°±æ˜¯ç•Œé¢é™¤å»äº†æ ‡é¢˜æ ã€é™¤å»äº†è¢«è½¯é”®ç›˜æŒ¡ä½çš„éƒ¨åˆ†ï¼Œæ‰€å‰©ä¸‹çš„çŸ©å½¢åŒºåŸŸâ€”â€”å¦‚å›¾æ‰€ç¤ºï¼Œçº¢æ¡†ä¸­çš„åŒºåŸŸã€‚<br><img src="http://barryzhang.qiniudn.com/QQ20161025.jpg" alt="RectåŒºåŸŸç¤ºæ„å›¾"></p>
<p>â†‘ä¹Ÿå¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>rect.topå€¼ï¼Œå…¶å®å°±æ˜¯æ ‡é¢˜æ çš„é«˜åº¦ã€‚ï¼ˆå®é™…ä¸Šï¼Œè¿™ä¹Ÿå¸¸å¸¸è¢«ç”¨ä½œä¸ºè·å–æ ‡é¢˜æ é«˜åº¦çš„æ–¹æ³•ï¼‰</li>
<li>å±å¹•é«˜åº¦-rect.bottomï¼Œæ˜¯è½¯é”®ç›˜çš„é«˜åº¦ã€‚ï¼ˆè·å–è½¯é”®ç›˜é«˜åº¦çš„æ–¹æ³•ä¹Ÿå‡ºç°äº†ï¼‰</li>
</ul>
<p>è¿™æ—¶ï¼Œå°±æœ‰ï¼š</p>
<ul>
<li><code>å…¨å±æ¨¡å¼</code>ä¸‹ï¼Œ<code>å¯ç”¨é«˜åº¦</code> = rect.bottom </li>
<li>é<code>å…¨å±æ¨¡å¼</code>ï¼Œ<code>å¯ç”¨é«˜åº¦</code> = rect.bottom - rect.top</li>
</ul>
<h3 id="4-æœ€åä¸€æ­¥ï¼Œé‡è®¾é«˜åº¦"><a href="#4-æœ€åä¸€æ­¥ï¼Œé‡è®¾é«˜åº¦" class="headerlink" title="4.æœ€åä¸€æ­¥ï¼Œé‡è®¾é«˜åº¦"></a>4.æœ€åä¸€æ­¥ï¼Œé‡è®¾é«˜åº¦</h3><p>æˆ‘ä»¬è®¡ç®—å‡ºçš„<code>å¯ç”¨é«˜åº¦</code>ï¼Œæ˜¯ç›®å‰åœ¨è§†è§‰æ•ˆæœä¸Šèƒ½çœ‹åˆ°çš„ç•Œé¢é«˜åº¦ã€‚ä½†å½“å‰ç•Œé¢çš„å®é™…é«˜åº¦æ˜¯æ¯”<code>å¯ç”¨é«˜åº¦</code>è¦å¤šå‡ºä¸€ä¸ªè½¯é”®ç›˜çš„è·ç¦»çš„ã€‚<br>æ‰€ä»¥ï¼Œæœ€åä¸€æ­¥ï¼Œå°±æ˜¯æŠŠç•Œé¢é«˜åº¦ç½®ä¸º<code>å¯ç”¨é«˜åº¦</code>â€”â€”å¤§åŠŸå‘Šæˆã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">possiblyResizeChildOfContent</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> usableHeightNow = computeUsableHeight();</div><div class="line">    <span class="keyword">if</span> (usableHeightNow != usableHeightPrevious) &#123;</div><div class="line">        <span class="keyword">int</span> usableHeightSansKeyboard = mChildOfContent.getRootView().getHeight();</div><div class="line">        <span class="keyword">int</span> heightDifference = usableHeightSansKeyboard - usableHeightNow;</div><div class="line">        <span class="keyword">if</span> (heightDifference &gt; (usableHeightSansKeyboard/<span class="number">4</span>)) &#123;</div><div class="line">            <span class="comment">// keyboard probably just became visible</span></div><div class="line">            frameLayoutParams.height = usableHeightSansKeyboard - heightDifference;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// keyboard probably just became hidden</span></div><div class="line">            frameLayoutParams.height = usableHeightSansKeyboard;</div><div class="line">        &#125;</div><div class="line">        mChildOfContent.requestLayout();</div><div class="line">        usableHeightPrevious = usableHeightNow;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç é‡Œæ·»åŠ äº†ä¸€ä¸ªâ€heightDifference &gt; (usableHeightSansKeyboard/4)â€çš„åˆ¤æ–­ï¼Œè¿™æ˜¯ä¸ºäº†å»é™¤æ— è°“çš„å¹²æ‰°ã€‚å› ä¸ºèƒ½è§¦å‘OnGlobalLayoutäº‹ä»¶çš„åŸå› æœ‰å¾ˆå¤šï¼Œä¸æ­¢æ˜¯è½¯é”®ç›˜çš„å¼¹å‡ºå˜åŒ–ï¼Œè¿˜åŒ…æ‹¬å„ç§å­Viewçš„éšè—æ˜¾ç¤ºå˜åŒ–ç­‰ï¼Œå®ƒä»¬å¯¹ç•Œé¢é«˜åº¦çš„å½±å“æœ‰é™ã€‚åŠ ä¸Šäº†è¿™ä¸ªåˆ¤æ–­ä¹‹åï¼Œåªæœ‰ç•Œé¢çš„é«˜åº¦å˜åŒ–è¶…è¿‡1/4çš„å±å¹•é«˜åº¦ï¼Œæ‰ä¼šè¿›è¡Œé‡æ–°è®¾ç½®é«˜åº¦ï¼ŒåŸºæœ¬èƒ½ä¿è¯ä»£ç åªå“åº”è½¯é”®ç›˜çš„å¼¹å‡ºã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ€»ç»“èµ·æ¥ï¼Œå°±æ˜¯è¿™æ ·ï¼š</p>
<ol>
<li>æ™®é€šActivityï¼ˆä¸å¸¦WebViewï¼‰ï¼Œç›´æ¥ä½¿ç”¨<code>adjustpan</code>æˆ–è€…<code>adjustResize</code></li>
<li>å¦‚æœå¸¦WebViewï¼š   <ul>
<li>a) å¦‚æœé<code>å…¨å±æ¨¡å¼</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>adjustResize</code></li>
<li>b) å¦‚æœæ˜¯<code>å…¨å±æ¨¡å¼</code>ï¼Œåˆ™ä½¿ç”¨<code>AndroidBug5497Workaround</code>è¿›è¡Œå¤„ç†ã€‚</li>
</ul>
</li>
</ol>
<p>OKï¼Œä»¥ä¸Šå°±æ˜¯ä¸€æ®µå…³äºã€è½¯é”®ç›˜æŒ¡ä½è¾“å…¥æ¡†ã€çš„çˆ¬å‘ä¹‹æ—…ã€‚</p>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><p>æœ‰ç”¨çš„é“¾æ¥ï¼š<br><a href="https://code.google.com/p/android/issues/detail?id=5497" target="_blank" rel="external">https://code.google.com/p/android/issues/detail?id=5497</a><br><a href="http://stackoverflow.com/a/19494006" target="_blank" rel="external">http://stackoverflow.com/a/19494006</a><br><a href="https://developer.android.com/reference/android/view/ViewTreeObserver.html" target="_blank" rel="external">https://developer.android.com/reference/android/view/ViewTreeObserver.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;å¼€å‘åšå¾—ä¹…äº†ï¼Œæ€»å…ä¸äº†ä¼šé‡åˆ°å„ç§å‘ã€‚&lt;br&gt;è€Œåœ¨Androidå¼€å‘çš„è·¯ä¸Šï¼Œã€è½¯é”®ç›˜æŒ¡ä½äº†è¾“å…¥æ¡†ã€è¿™ä¸ªå‘ï¼Œå¯è°“æ˜¯ä¸€ä¸ªæ—·æ—¥æŒä¹…çš„å·¨å‘â€”â€”æ¥æ¥æ¥ï¼Œæˆ‘ä»¬æ…¢æ…¢çœ‹ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="Android keyboard webview" scheme="http://barryhappy.github.io/tags/Android-keyboard-webview/"/>
    
  </entry>
  
  <entry>
    <title>Androidå¼€å‘ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨Kotlinï¼Ÿ</title>
    <link href="http://barryhappy.github.io/2016/10/21/why-we-need-kotlin/"/>
    <id>http://barryhappy.github.io/2016/10/21/why-we-need-kotlin/</id>
    <published>2016-10-20T16:34:08.000Z</published>
    <updated>2016-10-22T13:19:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Kotlinè¿›è¡Œäº†ä¸€æ®µæ—¶é—´çš„Androidå¼€å‘ä¹‹åï¼Œæˆ‘æ·±æ·±åœ°ä½“éªŒåˆ°äº†å®ƒçš„ç¾å¥½ï¼Œè§‰å¾—æ˜¯æ—¶å€™æŠŠå®ƒæ‹¿å‡ºæ¥å®‰åˆ©ä¸€ä¸‹äº†ã€‚<br><a id="more"></a></p>
<h1 id="1-Kotlinæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-Kotlinæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. Kotlinæ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. Kotlinæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>Kotlinæ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œç”±JetBrainså…¬å¸å¼€å‘çš„ã€‚JetBrainså°±æ˜¯é‚£ä¸ªå¼€å‘äº†æ— æ•°ä¸ªç‰›é€¼IDEçš„å…¬å¸ï¼ŒAndroid Studioå°±æ˜¯å»ºç«‹åœ¨ä»–å®¶çš„Intellijä¹‹ä¸Šçš„ã€‚<br>Kotlinæ˜¯åŸºäºJVMçš„ï¼Œæ‰€ä»¥å¼€å‘è€…å¯ä»¥ä»€ä¹ˆæ–¹ä¾¿åœ°ç”¨å®ƒæ¥è¿›è¡ŒAndroidå¼€å‘â€”â€”æ”¯æŒKotlinå’ŒJavaçš„æ··åˆç¼–å†™ã€‚</p>
<h1 id="2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Kotlinï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Kotlinï¼Ÿ" class="headerlink" title="2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Kotlinï¼Ÿ"></a>2. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Kotlinï¼Ÿ</h1><p>æˆ‘è§‰å¾—å®ƒä¹‹æ‰€ä»¥é€‚åˆAndroidå¼€å‘ï¼Œä¸»è¦æ˜¯å› ä¸ºä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š</p>
<h2 id="2-1-ç®€æ´ã€ä¼˜é›…"><a href="#2-1-ç®€æ´ã€ä¼˜é›…" class="headerlink" title="2.1 ç®€æ´ã€ä¼˜é›…"></a>2.1 ç®€æ´ã€ä¼˜é›…</h2><p>å†™äº†å¾ˆå¤šå¹´çš„Javaä¹‹åï¼Œå†å†™Kotlinï¼ŒçœŸæ˜¯è§‰å¾—å¦‚æ²æ˜¥é£ã€‚<br>é™¤äº†<code>ä¸ç”¨å†™åˆ†å·</code>ä»¥åŠå¤©ç„¶<code>æ”¯æŒLambdaè¡¨è¾¾å¼</code>ä¹‹å¤–ï¼Œå®ƒçš„è¯­æ³•æœ¬èº«å°±æ¯”Javaç®€æ´è®¸å¤šã€‚ </p>
<p>ä¸¾å‡ ä¸ªå°ä¾‹å­ï¼Œæ¯”å¦‚ï¼Œç±»å‹æ¨å¯¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">val a : Int = <span class="number">1</span> <span class="comment">// æ­£å¸¸çš„å£°æ˜ã€èµ‹å€¼</span></div><div class="line">val b = <span class="number">2</span> <span class="comment">// ç±»å‹æ¨å¯¼ï¼Œå¯ä»¥çœç•¥Intå£°æ˜ </span></div><div class="line"></div><div class="line"><span class="comment">/* å®šä¹‰å‡½æ•°ï¼šè‡ªåŠ¨æ¨å¯¼å‡½æ•°çš„è¿”å›å€¼ç±»å‹ */</span></div><div class="line">fun sum(a: Int, b: Int) = a + b</div></pre></td></tr></table></figure></p>
<p>å­—ç¬¦ä¸²æ¨¡æ¿ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val name = <span class="string">"Barry"</span></div><div class="line">val age = <span class="number">15</span></div><div class="line">print(<span class="string">"My name is $&#123;name&#125;, I am $&#123;age&#125; "</span>)  <span class="comment">// ä¼šæ‰“å°å‡ºï¼š My name is Barry, I am 15</span></div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå¯ä»¥å¯¹æ¯”ä½“ä¼šä¸€ä¸‹ä»–ä»¬çš„ä¸åŒâ€”â€” éå†ä¸€ä¸ªåˆ—è¡¨ï¼Œæ‰“å°å…¶ä¸­çš„å¥‡æ•°ã€‚<br>å¦‚æœç”¨javaå†™:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">List list = Arrays.asList(<span class="string">"H"</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">20</span>,<span class="number">199</span>);</div><div class="line"><span class="keyword">for</span>(Object number : list)&#123;</div><div class="line">    <span class="keyword">if</span>(!(number <span class="keyword">instanceof</span>  Integer)) &#123;</div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>((Integer)number % <span class="number">2</span> == <span class="number">0</span>)&#123;</div><div class="line">        System.out.println((Integer)number);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è€Œç”¨Kotlinçš„è¯ï¼Œæ˜¾ç„¶ä¼šæ›´æ¸…æ™°ã€ç®€æ´ã€ä¼˜é›…ï¼ˆæ³¨æ„è¿™é‡Œçš„lambdaè¡¨è¾¾å¼ï¼‰ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">val list = Arrays.asList(<span class="string">"H"</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">20</span>, <span class="number">199</span>)</div><div class="line">list.filter &#123; it is Int &#125;</div><div class="line">        .filter &#123; it <span class="keyword">as</span> Int % <span class="number">2</span> != <span class="number">0</span> &#125;</div><div class="line">        .forEach &#123; println(it) &#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨Kotlinä¸­ï¼Œè¯¸å¦‚æ­¤ç±»çš„è¯­æ³•ç³–è¿˜æœ‰å¾ˆå¤šï¼šå‡½æ•°é»˜è®¤å€¼ã€å†…è”å‡½æ•°ã€rangesã€kvéå†Mapã€lazyå±æ€§ã€æ•°æ®å¯¹è±¡å£°æ˜ã€è¿ç®—ç¬¦é‡è½½â€¦â€¦ å¦‚æœå±•å¼€æ¥è¯´çš„è¯ï¼Œæ¯ä¸ªéƒ½å¯ä»¥è¯´å¾ˆå¤šã€‚</p>
<p>å½“ä¹ æƒ¯è¿™äº›ä¹‹åï¼Œå¾ˆå®¹æ˜“å°±ä¼šæœ‰è¿™ç§æ„Ÿè§‰ï¼šå†™Kotlinç›¸æ¯”è¾ƒå†™Javaï¼Œå°±åƒé«˜é“ä¹‹äºç»¿çš®ç«è½¦ã€iPhoneä¹‹äºå±±å¯¨æœºã€4Kå±ä¹‹äº800*600â€¦â€¦æ²¡æœ‰å®ƒä¹‹å‰è§‰å¾—è€çš„ä¸œè¥¿ä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯ä¸€æ—¦ä¹ æƒ¯ï¼Œå†æ”¹å›å»çš„è¯å°±è§‰å¾—æµ‘èº«éš¾å—ã€‚ </p>
<p>å¦å¤–ï¼Œç®€æ´çš„è¯­æ³•ä¸ä»…ä½¿ä»£ç è¯»èµ·æ¥æ¸…æ™°æµç•…ï¼Œä¹Ÿè®©å®ƒè‡ªç„¶<strong>ç®€å•æ˜“å­¦</strong>â€”â€”åŸºæœ¬ä¸ŠèŠ±ä¸ŠåŠå¤©æ—¶é—´ï¼ŒæŠŠå®˜æ–¹æ–‡æ¡£çœ‹ä¸Šä¸€éï¼Œå°±å¯ä»¥å¼€å§‹codingäº†ã€‚</p>
<h2 id="2-2-å®‰å…¨"><a href="#2-2-å®‰å…¨" class="headerlink" title="2.2 å®‰å…¨"></a>2.2 å®‰å…¨</h2><p>åœ¨Javaé‡Œï¼Œæˆ‘ä»¬å¸¸å¸¸è¦è¿›è¡Œè®¸å¤šéç©ºåˆ¤æ–­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun1</span> <span class="params">(String str)</span></span>&#123;</div><div class="line">   <span class="keyword">if</span>(str != <span class="keyword">null</span>) &#123;</div><div class="line">       System.out.println(<span class="string">"Length = "</span> + str.length());</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è€Œåœ¨Kotlinä¸­ï¼Œå³ä½¿ä¸è¿›è¡Œè¿™äº›é¢å¤–çš„åˆ¤æ–­ï¼Œä»£ç ä¹Ÿæ˜¯å¥å£®çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å¦‚æœstr=nullï¼Œä¼šæ‰“å°ï¼šLength = null</span></div><div class="line">fun fun1 (str: <span class="built_in">String</span>?) &#123;</div><div class="line">    println(<span class="string">"Length = "</span> + str?.length) </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ï¼ŒJavaä¸­ç»å¸¸å‡ºç°çš„ClassCastExceptionï¼Œåœ¨Kotlinä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰å…¨çš„ç±»å‹è½¬æ¢è¿›è¡Œé¿å…ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">val l2 = listOf(<span class="string">"A"</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="string">'c'</span>)</div><div class="line">l2.forEach &#123; println(it <span class="keyword">as</span>? Int) &#125;</div></pre></td></tr></table></figure></p>
<h2 id="2-3-å‡½æ•°ã€å±æ€§æ‰©å±•"><a href="#2-3-å‡½æ•°ã€å±æ€§æ‰©å±•" class="headerlink" title="2.3 å‡½æ•°ã€å±æ€§æ‰©å±•"></a>2.3 å‡½æ•°ã€å±æ€§æ‰©å±•</h2><p>Kotlinæä¾›äº†ä¸€ç§æ–¹æ³•â€”â€”å¯ä»¥åœ¨æ—¢ä¸éœ€è¦ç»§æ‰¿çˆ¶ç±»ï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨ç±»ä¼¼è£…é¥°å™¨è®¾è®¡æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œå¯¹ç±»è¿›è¡Œæ‰©å±•ã€‚ç®€ç›´æ˜¯é»‘ç§‘æŠ€ï¼<br>æ¯”å¦‚ï¼Œç»™Stringç±»æ·»åŠ ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œç”¨ä»¥è¿”å›å®ƒçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚åªéœ€è¦è¿™æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å‡½æ•°æ‰©å±•</span></div><div class="line">fun <span class="built_in">String</span>.firstChar() : <span class="built_in">String</span>? &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">if</span>(<span class="keyword">this</span>.length &gt; <span class="number">0</span>) <span class="keyword">this</span>.substring(<span class="number">0</span>,<span class="number">1</span>) <span class="keyword">else</span> <span class="string">"NULL"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªæ‰©å±•å‡½æ•°å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å£°æ˜ï¼Œç„¶åå…¶ä»–ä»»ä½•åœ°æ–¹Stringå¯¹è±¡å°±éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•äº†:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">val s = <span class="string">"Hello"</span>.firstChar())  <span class="comment">// sçš„å€¼ä¸º"H"</span></div><div class="line">println(<span class="string">"ä½ å¥½"</span>.firstChar())   <span class="comment">// æ‰“å°ï¼š ä½ </span></div><div class="line">println(<span class="string">""</span>.firstChar())   <span class="comment">// æ‰“å°ï¼š NULL</span></div></pre></td></tr></table></figure></p>
<h2 id="2-4-å…¼å®¹Java"><a href="#2-4-å…¼å®¹Java" class="headerlink" title="2.4 å…¼å®¹Java"></a>2.4 å…¼å®¹Java</h2><p>ä¸€ä¸ªè¯­è¨€èƒ½å¦è¢«å¹¿æ³›ä½¿ç”¨ï¼Œé™¤äº†å®ƒæœ¬èº«è¦å¥½ç”¨ä¹‹å¤–ï¼Œè¿˜è¦æœ‰ä¸€ä¸ªè‰¯å¥½çš„ç”Ÿæ€ã€‚ å°¤å…¶åœ¨æ˜¯å¦‚ä»Šï¼Œå„ç§åº”ç”¨å±‚çš„å¼€å‘å®é™…ä¸Šå¾ˆä¾èµ–äºå„ç§å¼€æºåº“ã€ç¬¬ä¸‰æ–¹ç»„ä»¶ç­‰ï¼Œå¦‚æœä¸€ä¸ªåº”ç”¨å±‚çš„è¯­è¨€æ²¡æœ‰è¿™äº›æ”¯æŒçš„è¯ï¼Œæ˜¯å¾ˆéš¾è¢«å¹¿æ³›ä½¿ç”¨çš„ã€‚<br>è€Œå¯¹äºKotlinæ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› ä¸ºå®ƒè·ŸJavaæ˜¯æ— ç¼è¿æ¥çš„ï¼Œå¯ä»¥ç›¸äº’æ“ä½œã€‚<br>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>Kotlinå¯ä»¥ä½¿ç”¨æ‰€æœ‰ç”¨Javaå†™çš„ç»„ä»¶ï¼šï¼ˆRxJavaã€Retrofitã€EventBusã€Frescoâ€¦â€¦è¿™äº›éƒ½ä¸æ˜¯é—®é¢˜ï¼ï¼‰</li>
<li>åœ¨ç°æœ‰çš„ç”¨Javaå†™çš„é¡¹ç›®ä¸­å¯ä»¥å±€éƒ¨ä½¿ç”¨Kotlinï¼Œæ··åˆå¼€å‘</li>
<li>Java-&gt;Kotlinï¼Œå¯ä»¥é€æ­¥è¿ç§»è€Œä¸æ˜¯éé»‘å³ç™½</li>
<li>ä½¿ç”¨Kotlinå¼€å‘æ—¶ï¼Œä¸‡ä¸€é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ç¬é—´åˆ‡æ¢å›Java~  </li>
</ul>
<h2 id="2-5-å·¥å…·å®Œå–„"><a href="#2-5-å·¥å…·å®Œå–„" class="headerlink" title="2.5 å·¥å…·å®Œå–„"></a>2.5 å·¥å…·å®Œå–„</h2><p>æ¥ï¼Œæˆ‘ä»¬å†ç†ä¸€ä¸‹è¿™ä¸ªå…³ç³»æ ‘ï¼š<br>JetBrains<br>|â€“&gt; Intellij IDEA â€“&gt; Android Studio<br>|â€“&gt; Kotlin<br>Kotlinæ˜¯JetBrainså…¬å¸å‡ºçš„ï¼›JetBrainså‘æ¥ä»¥åšå„ç§ç‰›é€¼çš„IDEè‘—ç§°ï¼›Androidçš„å®˜æ–¹å¼€å‘å·¥å…·AndroidStudioå°±æ˜¯åŸºäºJetBrainså…¬å¸å‡ºå“çš„Intellijæ”¹é€ çš„ã€‚<br>â†‘ ä»¥ä¸Šæ˜¯èƒŒæ™¯ã€‚<br>ä»å®é™…ä½“éªŒè§’åº¦æ¥è¯´ï¼ŒKotlinçš„å¼€å‘ä¹Ÿæ˜¯ååˆ†æ–¹ä¾¿å¿«æ·çš„ã€‚<br>åªéœ€èŠ±å‡ åˆ†é’Ÿç»™AndroidStudioå®‰è£…ä¸€ä¸ªKotlinçš„æ‰©å±•æ’ä»¶ï¼Œå°±å¯ä»¥è¿…é€Ÿå¼€å§‹ä½“éªŒä½¿ç”¨Kotlinçš„å¿«æ„Ÿäº†ã€‚<br>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œä½ ç”šè‡³éƒ½ä¸éœ€è¦ä¼šä½¿ç”¨Kotlinï¼è¿™æ˜¯å› ä¸ºKotlinæ’ä»¶æä¾›äº†ä¸€ä¸ªJava-&gt;Kotlinçš„è½¬æ¢åŠŸèƒ½ï¼Œå¯ä»¥ä¸€é”®æŠŠç°æœ‰çš„Javaä»£ç è½¬æ¢ä¸ºKotlinä»£ç ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»å®ƒè½¬æ¢åçš„Kotlinä»£ç ï¼Œè¿›è¡Œå­¦ä¹ ã€‚<br>ï¼ˆå®é™…ä¸Šï¼Œæˆ‘åœ¨å­¦ä¹ Kotlinçš„æ—¶å€™ï¼Œå°±å¤§é‡ä½¿ç”¨äº†è¿™ç§æ–¹æ³•ï¼šå½“æˆ‘ä¸çŸ¥é“æŸä¸ªåŠŸèƒ½ç”¨Kotlinæ€ä¹ˆå†™çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆç”¨JavaæŠŠå®ƒå†™å‡ºæ¥ï¼Œç„¶åä½¿ç”¨è½¬æ¢åŠŸèƒ½ï¼Œç”ŸæˆKotlinä»£ç ï¼Œä»è€Œå°±çŸ¥é“äº†Kotlinçš„å†™æ³•ï¼‰</p>
<h1 id="3-å¦‚ä½•å¼€å§‹"><a href="#3-å¦‚ä½•å¼€å§‹" class="headerlink" title="3. å¦‚ä½•å¼€å§‹"></a>3. å¦‚ä½•å¼€å§‹</h1><p>å› ä¸ºæ˜¯ä¸€ç¯‡çº¯ç²¹çš„è¯´æ˜æ–‡ï¼Œæ‰€ä»¥æˆ‘æŠŠå¦‚ä½•å¼€å§‹å•ç‹¬æŠ½ç¦»å‡ºæ¥ï¼Œå†™äº†è¿™ç¯‡æ–‡ç« ï¼šã€Šåªéœ€äº”åˆ†é’Ÿï¼Œå¼€å§‹ä½¿ç”¨Kotlinå¼€å‘Androidã€‹<br>â˜ é“¾æ¥çœ‹è¿™é‡Œï¼š<br><a href="http://www.barryzhang.com/archives/476" target="_blank" rel="external">http://www.barryzhang.com/archives/476</a><br><a href="http://www.jianshu.com/p/5fa2c1eda64c" target="_blank" rel="external">http://www.jianshu.com/p/5fa2c1eda64c</a></p>
<h1 id="å…¶ä»–ï¼š"><a href="#å…¶ä»–ï¼š" class="headerlink" title="å…¶ä»–ï¼š"></a>å…¶ä»–ï¼š</h1><p>æœ‰ç”¨çš„é“¾æ¥ä»¬ï¼š</p>
<ul>
<li><a href="https://kotlinlang.org/" target="_blank" rel="external">Kotlinå®˜ç½‘</a>  <a href="http://kotlinlang.cn/" target="_blank" rel="external">Kotlinå®˜ç½‘ï¼šä¸­æ–‡</a></li>
<li><a href="https://huanglizhuo.gitbooks.io/kotlin-in-chinese" target="_blank" rel="external">Kotlin in Chinese</a><br>ä¸­æ–‡ç¿»è¯‘çš„Kotlinå®˜æ–¹æ–‡æ¡£ by @huanglizhuoã€‚<br><a href="http://kotlindoc.com/" target="_blank" rel="external">å¦ä¸€ä¸ªåœ°å€</a>ï¼Œè®¿é—®é€Ÿåº¦ä¼šç•¥å¿«ä¸€äº›ã€‚</li>
<li><a href="https://github.com/wangjiegulu/kotlin-for-android-developers-zh/blob/master/SUMMARY.md" target="_blank" rel="external">ä¸­æ–‡ç‰ˆï¼šKotlin for Android Developers</a></li>
<li><a href="https://github.com/barryhappy/Gank.Kotlin" target="_blank" rel="external">åšç€è„¸çš®æ”¾ä¸€ä¸ªè‡ªå·±çš„Kotliné¡¹ç›®</a></li>
<li><a href="https://www.zhihu.com/question/25289041" target="_blank" rel="external">å¦‚ä½•è¯„ä»· Kotlin è¯­è¨€ï¼Ÿâ€”â€”çŸ¥ä¹</a> </li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=404087761&amp;idx=1&amp;sn=d80625ee52f860a7a2ed4c238d2151b6" target="_blank" rel="external">Androidå¼€å‘å¿…å¤‡çŸ¥è¯†ï¼šä¸ºä»€ä¹ˆè¯´Kotlinå€¼å¾—ä¸€è¯•</a> </li>
</ul>
<hr>
<p>å…³äºä½œè€… :<br><a href="http://www.barryzhang.com" target="_blank" rel="external">http://www.barryzhang.com</a><br><a href="https://barryhappy.github.io">https://barryhappy.github.io</a><br><a href="http://www.jianshu.com/users/e4607fd59d0d/latest_articles" target="_blank" rel="external">http://www.jianshu.com/users/e4607fd59d0d/latest_articles</a><br><a href="http://blog.csdn.net/barryhappy" target="_blank" rel="external">http://blog.csdn.net/barryhappy</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä½¿ç”¨Kotlinè¿›è¡Œäº†ä¸€æ®µæ—¶é—´çš„Androidå¼€å‘ä¹‹åï¼Œæˆ‘æ·±æ·±åœ°ä½“éªŒåˆ°äº†å®ƒçš„ç¾å¥½ï¼Œè§‰å¾—æ˜¯æ—¶å€™æŠŠå®ƒæ‹¿å‡ºæ¥å®‰åˆ©ä¸€ä¸‹äº†ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Android Kotlin" scheme="http://barryhappy.github.io/tags/Android-Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>åªéœ€äº”åˆ†é’Ÿï¼Œå¼€å§‹ä½¿ç”¨Kotlinå¼€å‘Android</title>
    <link href="http://barryhappy.github.io/2016/10/20/start-kotlin-in-5-mins/"/>
    <id>http://barryhappy.github.io/2016/10/20/start-kotlin-in-5-mins/</id>
    <published>2016-10-19T16:17:12.000Z</published>
    <updated>2016-10-22T13:19:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>1ï¼šæœ¬æ–‡æ˜¯ä¸€ç¯‡æè¿°å¦‚ä½•åœ¨Androidä¸Šå¼€å§‹ä¸€ä¸ªKotlinçš„HelloWorldç¨‹åºçš„è¯´æ˜æ–‡ã€‚<br>2ï¼šå…¶å®ä½ å¦‚æœä½ ç½‘ç»œå¤Ÿç»™åŠ›çš„è¯ï¼Œä¹Ÿè®¸ä¸‰åˆ†é’Ÿå°±å¯ä»¥äº†ã€‚å½“ç„¶ç½‘ç»œä¸å¤Ÿç»™åŠ›ï¼Œä¹Ÿå¯èƒ½ååˆ†é’Ÿè¿˜æ²¡æ•´å¥½~</p>
<p>å¥½äº†ï¼Œæ­£æ–‡å¼€å§‹ï¼š<br><a id="more"></a></p>
<hr>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œæˆ‘ä»¬æ­£å¤„äºä¸€ä¸ªç¾å¥½çš„æ—¶ä»£ã€‚å¾—ç›Šäºäº’è”ç½‘çš„å‘å±•ã€å·¥å…·çš„è¿›æ­¥ï¼Œæˆ‘ä»¬ç°åœ¨å­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯çš„æˆæœ¬å’Œéš¾åº¦éƒ½æ¯”è¿‡å»ä½äº†å¾ˆå¤šã€‚<br>å‡è®¾ä½ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡Kotlinï¼Œé‚£ä¹ˆä»å¤´å¼€å§‹å†™ä¸€ä¸ªHelloWorldçš„appä¹Ÿåªéœ€è¦è¿™ä¹ˆå‡ æ­¥ï¼š</p>
<h2 id="é¦–å…ˆï¼Œä½ è¦æœ‰ä¸€ä¸ªAndroid-Studioã€‚"><a href="#é¦–å…ˆï¼Œä½ è¦æœ‰ä¸€ä¸ªAndroid-Studioã€‚" class="headerlink" title="é¦–å…ˆï¼Œä½ è¦æœ‰ä¸€ä¸ªAndroid Studioã€‚"></a>é¦–å…ˆï¼Œä½ è¦æœ‰ä¸€ä¸ªAndroid Studioã€‚</h2><p>æˆ‘æ­£åœ¨ç”¨çš„æ˜¯2.2.1ç‰ˆæœ¬ï¼Œå…¶å®ƒç‰ˆæœ¬åº”è¯¥ä¹Ÿå¤§åŒå°å¼‚ã€‚ </p>
<h2 id="å…¶æ¬¡ï¼Œå®‰è£…ä¸€ä¸ªKotlinçš„æ’ä»¶ã€‚"><a href="#å…¶æ¬¡ï¼Œå®‰è£…ä¸€ä¸ªKotlinçš„æ’ä»¶ã€‚" class="headerlink" title="å…¶æ¬¡ï¼Œå®‰è£…ä¸€ä¸ªKotlinçš„æ’ä»¶ã€‚"></a>å…¶æ¬¡ï¼Œå®‰è£…ä¸€ä¸ªKotlinçš„æ’ä»¶ã€‚</h2><p>ä¾æ¬¡æ‰“å¼€ï¼šAndroid Studio &gt; Preferences &gt; Pluginsï¼Œç„¶åé€‰æ‹©ã€Browse repositoriesã€ï¼Œåœ¨æœç´¢æ¡†ä¸­æœç´¢Kotlinï¼Œç»“æœåˆ—è¡¨ä¸­çš„ã€Kotlinã€æ’ä»¶ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ç›®æ ‡äº†ã€‚<br>ç‚¹å‡»å®‰è£…ï¼Œå®‰è£…å®Œæˆä¹‹åï¼Œé‡å¯Android Studioã€‚<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y08iu63gj219s11e48p.jpg" alt="Kotlinæ’ä»¶"></p>
<h2 id="æ–°å»ºä¸€ä¸ªAndroidé¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªAndroidé¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªAndroidé¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªAndroidé¡¹ç›®</h2><p>é‡æ–°æ‰“å¼€Android Studioï¼Œæ–°å»ºä¸€ä¸ªAndroidé¡¹ç›®å§ï¼Œæ·»åŠ ä¸€ä¸ªé»˜è®¤çš„MainActivity<br>â€”â€”åƒä»¥å‰ä¸€æ ·å³å¯ã€‚</p>
<h2 id="Java-to-Kotlin"><a href="#Java-to-Kotlin" class="headerlink" title="Java to Kotlin"></a>Java to Kotlin</h2><p>å®‰è£…å®Œæ’ä»¶çš„AndroidStudioç°åœ¨å·²ç»æ‹¥æœ‰å¼€å‘Kotlinçš„æ–°èƒ½åŠ›äº†ï¼Œé‚£ä¹ˆå¦‚ä½•ä½“ç°è¿™ä¸ªèƒ½åŠ›å‘¢ï¼Ÿ<br>æˆ‘ä»¬å…ˆæ¥å°è¯•å®ƒçš„è½¬æ¢åŠŸèƒ½ï¼šJava -&gt; Kotlinï¼Œå¯ä»¥æŠŠç°æœ‰çš„javaæ–‡ä»¶ç¿»è¯‘æˆKotlinæ–‡ä»¶ã€‚ </p>
<p>æ‰“å¼€MainActivityæ–‡ä»¶ï¼Œåœ¨Codeèœå•ä¸‹é¢å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼šConvert Java File to Kotlin Fileã€‚<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y09xgixcj21080gkqaf.jpg" alt="Java to Kotlin"></p>
<p>ç‚¹å‡»è½¬æ¢ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœï¼š<br>javaæ–‡ä»¶ï¼šMainActivity.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.barryzhang.kotlinhello;</div><div class="line"></div><div class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</div><div class="line"><span class="keyword">import</span> android.os.Bundle;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è½¬æ¢åçš„Kotlinæ–‡ä»¶ï¼šMainActivity.kt<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">package com.barryzhang.kotlinhello</div><div class="line"></div><div class="line">import android.support.v7.app.AppCompatActivity</div><div class="line">import android.os.Bundle</div><div class="line"></div><div class="line">class MainActivity : AppCompatActivity() &#123;</div><div class="line"></div><div class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</div><div class="line">        super.onCreate(savedInstanceState)</div><div class="line">        setContentView(R.layout.activity_main)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Kotlinçš„è½¬æ¢åŠŸèƒ½æ˜¯ååˆ†å®ç”¨çš„ï¼Œå¯¹äºæˆ‘ä»¬é‡ç”¨è¿‡å»çš„javaä»£ç ã€æˆ–è€…ç½‘ä¸Šæœç´¢åˆ°çš„javaä»£ç ç‰‡æ®µå¾ˆæœ‰å¸®åŠ©ã€‚ï¼ˆå½“ç„¶ï¼ŒKotlinæ˜¯ç›´æ¥å…¼å®¹javaçš„ï¼Œå¦‚æœä¸æƒ³è½¬æ¢ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨Javaçš„æ–¹æ³•ï¼‰</p>
<h2 id="é…ç½®gradleæ–‡ä»¶"><a href="#é…ç½®gradleæ–‡ä»¶" class="headerlink" title="é…ç½®gradleæ–‡ä»¶"></a>é…ç½®gradleæ–‡ä»¶</h2><p>MainActivityå·²ç»è¢«è½¬æ¢æˆäº†Kotlinå®ç°ï¼Œä½†æ˜¯é¡¹ç›®ç›®å‰è¿˜ä¸å¯ä»¥ç”¨ï¼Œè¿˜éœ€è¦é…ç½®ä¸€ä¸‹ï¼Œè®©é¡¹ç›®æ”¯æŒgradeçš„ç¼–è¯‘ã€è¿è¡Œã€‚<br>å½“ç„¶ï¼Œè¿™ä¸€æ­¥ä¹Ÿä¸éœ€è¦æˆ‘ä»¬åšå¤ªå¤šå·¥ä½œâ€”â€”åœ¨javaè½¬æ¢æˆKotlinä¹‹åï¼Œæ‰“å¼€MainActivity.ktæ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šæç¤ºâ€Kotlin not configuredâ€ï¼Œç‚¹å‡»ä¸€ä¸‹ConfigureæŒ‰é’®ï¼ŒIDEå°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½®å¥½äº†ï¼ï¼ˆæ‰€ä»¥è¯´Kotlinçš„å·¥å…·å®Œå–„å¯ä¸æ˜¯å¹çš„ï¼Œæ¯•ç«ŸKotlinçš„è€çˆ¹JetBrainså°±æ˜¯ä¸“é—¨åšå·¥å…·çš„å•Šï¼‰<br><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y0akfdzij20l10eadj5.jpg" alt="Kotlin not configured"></p>
<p>è¿™ä¸ªè‡ªåŠ¨é…ç½®ï¼Œå®é™…ä¸Šæ˜¯åšäº†è¿™äº›æ”¹åŠ¨ã€‚<br>é¡¹ç›®çš„build.gradleæ·»åŠ ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">buildscript &#123;</div><div class="line">    ext.kotlin_version = <span class="string">'1.0.4'</span></div><div class="line">    dependencies &#123; </div><div class="line">        classpath <span class="string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="http://ww2.sinaimg.cn/large/801b780ajw1f8y0bg5kcuj20hj06nabf.jpg" alt="gradle1"><br>moduleé‡Œçš„build.gradleæ·»åŠ ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'kotlin-android'</span></div><div class="line">android &#123; </div><div class="line">    sourceSets &#123;</div><div class="line">        main.java.srcDirs += <span class="string">'src/main/kotlin'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">dependencies &#123; </div><div class="line">    compile <span class="string">"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"</span></div><div class="line">&#125;</div><div class="line">repositories &#123;</div><div class="line">    mavenCentral()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="http://ww1.sinaimg.cn/large/801b780ajw1f8y0bhs2f7j20jx0ea0v9.jpg" alt="gradle2"></p>
<p>â†‘â†‘â†‘ ç†Ÿæ‚‰äº†ä¹‹åè‡ªå·±æ‰‹å†™ä¹Ÿæ˜¯é˜”ä»¥çš„ã€‚</p>
<h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><p>é…ç½®ä¹‹åï¼Œç­‰syncå®Œæˆï¼Œå°±å¯ä»¥è¿è¡Œäº†~ ï¼ˆå¦‚æœä½ syncå¤±è´¥æˆ–è€…è€—æ—¶è¿‡é•¿ï¼Œèµ¶ç´§æ£€è®¨ä¸€ä¸‹è‡ªå·±æœ‰æ²¡æœ‰ç§‘å­¦ä¸Šç½‘ï¼Ÿï¼‰<br><img src="http://ww4.sinaimg.cn/large/801b780ajw1f8y10t7bubj20bi0ktt98.jpg" alt="hello"><br>biu~èµ·é£ï¼Œæ¬¢è¿æ¥åˆ°æ–°ä¸–ç•Œçš„å¤§é—¨ã€‚ </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;1ï¼šæœ¬æ–‡æ˜¯ä¸€ç¯‡æè¿°å¦‚ä½•åœ¨Androidä¸Šå¼€å§‹ä¸€ä¸ªKotlinçš„HelloWorldç¨‹åºçš„è¯´æ˜æ–‡ã€‚&lt;br&gt;2ï¼šå…¶å®ä½ å¦‚æœä½ ç½‘ç»œå¤Ÿç»™åŠ›çš„è¯ï¼Œä¹Ÿè®¸ä¸‰åˆ†é’Ÿå°±å¯ä»¥äº†ã€‚å½“ç„¶ç½‘ç»œä¸å¤Ÿç»™åŠ›ï¼Œä¹Ÿå¯èƒ½ååˆ†é’Ÿè¿˜æ²¡æ•´å¥½~&lt;/p&gt;
&lt;p&gt;å¥½äº†ï¼Œæ­£æ–‡å¼€å§‹ï¼š&lt;br&gt;
    
    </summary>
    
    
      <category term="Android Kotlin" scheme="http://barryhappy.github.io/tags/Android-Kotlin/"/>
    
  </entry>
  
  <entry>
    <title>ã€Androidã€‘çœŸæœºè°ƒè¯•æ–°å§¿åŠ¿ï¼šæ— çº¿è¿æ¥</title>
    <link href="http://barryhappy.github.io/2016/10/09/android-wireless-debug/"/>
    <id>http://barryhappy.github.io/2016/10/09/android-wireless-debug/</id>
    <published>2016-10-09T03:56:45.000Z</published>
    <updated>2016-10-09T07:12:22.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨è¿›è¡ŒAndroidå¼€å‘æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨usbçº¿æŠŠæ‰‹æœºå’Œç”µè„‘è¿æ¥èµ·æ¥è¿›è¡Œè°ƒè¯•å·¥ä½œã€‚ä½†å¦‚æœä½ è§‰å¾—è¿™æ ·ä¸å¤Ÿé…·çš„è¯ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹æ— çº¿è¿æ¥ï¼Œé¢‡ç®€å•ï¼ŒGOï¼<br><a id="more"></a></p>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul>
<li>æ‰‹æœºå’Œç”µè„‘éœ€è¦åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘  </li>
<li>å‡†å¤‡ä¸€æ¡æ•°æ®çº¿â€”â€”ï¼ˆwhatï¼Ÿä¸æ˜¯è¯´æ— çº¿è¿æ¥å—ï¼Ÿï¼åˆ«ç€æ€¥ï¼Œè¿™åªæ˜¯ç¬¬ä¸€æ¬¡è®¾ç½®æ—¶ç”¨åˆ°çš„ï¼Œä»¥åå†è¿æ¥å°±ä¸éœ€è¦æ•°æ®çº¿äº†ï¼‰</li>
<li>ä½ éœ€è¦çŸ¥é“æ€ä¹ˆæ‰§è¡Œadbå‘½ä»¤ï¼ˆä¸çŸ¥é“çš„è¯è¯·è‡ªè¡ŒGoogleï¼‰</li>
</ul>
<h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><h3 id="1-æ‰“å¼€æ‰‹æœºçš„5555ç«¯å£"><a href="#1-æ‰“å¼€æ‰‹æœºçš„5555ç«¯å£" class="headerlink" title="1. æ‰“å¼€æ‰‹æœºçš„5555ç«¯å£"></a>1. æ‰“å¼€æ‰‹æœºçš„5555ç«¯å£</h3><p>è®©æ‰‹æœºåœ¨æŒ‡å®šçš„ç«¯å£å¯ä»¥æ¥æ”¶åˆ°TCP/IPè¿æ¥ã€‚ï¼ˆå½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨5555ï¼Œç”¨5556æˆ–è€…9999ç­‰éƒ½å¯ä»¥ï¼Œåªè¦ä½ å–œæ¬¢ï¼‰</p>
<ol>
<li>ç¡®ä¿æ‰‹æœºå¼€å¯äº†usbè°ƒè¯•</li>
<li>ç”¨usbçº¿æŠŠæ‰‹æœºå’Œç”µè„‘è¿æ¥èµ·æ¥</li>
<li><p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<p> <code>adb tcpip 5555</code></p>
</li>
</ol>
<p>æ‰§è¡ŒæˆåŠŸåå°±å¯ä»¥æŠŠusbçº¿æ‹”æ‰äº†ã€‚</p>
<h3 id="2-æ‰¾åˆ°æ‰‹æœºçš„IPåœ°å€"><a href="#2-æ‰¾åˆ°æ‰‹æœºçš„IPåœ°å€" class="headerlink" title="2. æ‰¾åˆ°æ‰‹æœºçš„IPåœ°å€"></a>2. æ‰¾åˆ°æ‰‹æœºçš„IPåœ°å€</h3><p>ä¸€èˆ¬åœ¨ <strong>è®¾ç½®-å…³äºæ‰‹æœº-çŠ¶æ€ä¿¡æ¯-IPåœ°å€</strong>å¯ä»¥æ‰¾åˆ°ã€‚<br>æ¯”å¦‚ï¼Œæˆ‘è¿™é‡Œçœ‹åˆ°æ‰‹æœºçš„IPåœ°å€æ˜¯<em>192.168.1.108</em></p>
<h3 id="3-é€šè¿‡IPåœ°å€å’Œç«¯å£è¿æ¥æ‰‹æœº"><a href="#3-é€šè¿‡IPåœ°å€å’Œç«¯å£è¿æ¥æ‰‹æœº" class="headerlink" title="3. é€šè¿‡IPåœ°å€å’Œç«¯å£è¿æ¥æ‰‹æœº"></a>3. é€šè¿‡IPåœ°å€å’Œç«¯å£è¿æ¥æ‰‹æœº</h3><p>æ‰§è¡Œå‘½ä»¤ï¼š<br>    <code>adb connect 192.168.1.108:5555</code></p>
<p>3.1 å¦‚æœæç¤º</p>
<blockquote>
<p>connected to 192.168.1.108:5555</p>
</blockquote>
<p>åˆ™è¡¨ç¤ºè¿æ¥æˆåŠŸ</p>
<p>3.2 å¦‚æœæç¤º</p>
<blockquote>
<p>unable to connect to 192.168.1.108:5555: Operation timed out</p>
</blockquote>
<p>â€”â€”å¯èƒ½ä½ çš„IPåœ°å€è¾“é”™äº†;æˆ–è€…adbæœåŠ¡ä¸å¯ç”¨;æˆ–è€…æ‰‹æœºè·Ÿç”µè„‘æ²¡æœ‰æ­£ç¡®åœ°å¤„åœ¨ä¸€ä¸ªå±€åŸŸç½‘ä¸­ï¼›æˆ–è€…é“¾æ¥è¢«ä»£ç†Blockäº†ç­‰ç­‰ç­‰â€¦</p>
<p>3.3 å¦‚æœæç¤º </p>
<blockquote>
<p>unable to connect to 192.168.1.108:5555: Connection refused</p>
</blockquote>
<p>â€”â€” å¯èƒ½ä½ æ‰‹æœºçš„5555ç«¯å£æ²¡æœ‰æ­£ç¡®æ‰“å¼€ï¼›æˆ–è€…æœ‰é˜²ç«å¢™æ‹¦æˆªç­‰â€¦</p>
<h3 id="4-å¦‚æœæ²¡æœ‰è¿æ¥æˆåŠŸ"><a href="#4-å¦‚æœæ²¡æœ‰è¿æ¥æˆåŠŸ" class="headerlink" title="4. å¦‚æœæ²¡æœ‰è¿æ¥æˆåŠŸ"></a>4. å¦‚æœæ²¡æœ‰è¿æ¥æˆåŠŸ</h3><p>å¦‚æœå‡ºç°äº†3.2æˆ–3.3çš„é”™è¯¯æç¤ºï¼Œæˆ–è€…å…¶ä»–ä»»ä½•é”™è¯¯ï¼Œéƒ½å¯ä»¥å°è¯•é‡å¯ä¸€ä¸‹adbæœåŠ¡ï¼š</p>
<blockquote>
<p>adb kill-server</p>
</blockquote>
<p>ç„¶åå†é‡æ–°è¿›è¡Œå°è¯•ã€‚</p>
<h3 id="5-è¿æ¥æˆåŠŸ"><a href="#5-è¿æ¥æˆåŠŸ" class="headerlink" title="5. è¿æ¥æˆåŠŸ"></a>5. è¿æ¥æˆåŠŸ</h3><p>å¦‚æœè¿æ¥æˆåŠŸçš„è¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰è¿æ¥çš„è®¾å¤‡åˆ—è¡¨ï¼š<br>    <code>adb devices</code><br>å¯ä»¥çœ‹åˆ°è¿æ¥çš„è®¾å¤‡ï¼Œåƒè¿™æ ·</p>
<blockquote>
<p>$ adb devices<br>List of devices attached<br>192.168.1.108:5555      device</p>
</blockquote>
<p>â€”â€”æ­å–œä½ ï¼Œä»æ­¤å¯ä»¥æ‘†è„±å¯¹æ•°æ®çº¿çš„ä¾èµ–äº†ã€‚</p>
<h2 id="æ€»ç»“-amp-å…¶ä»–"><a href="#æ€»ç»“-amp-å…¶ä»–" class="headerlink" title="æ€»ç»“&amp;å…¶ä»–"></a>æ€»ç»“&amp;å…¶ä»–</h2><ol>
<li>æ›´æ¢ä¸€ä¸ªç½‘ç»œç¯å¢ƒï¼ˆæ¯”å¦‚æŠŠæ‰‹æœºå’Œç”µè„‘ä»å…¬å¸å¸¦å›äº†å®¶é‡Œï¼‰ï¼Œä¸€èˆ¬åªéœ€è¦æŒ‰ç…§æ–°çš„æ‰‹æœºIPé‡æ–°è¿›è¡Œä¸€ä¸‹connectå³å¯ã€‚ </li>
<li>ä½†æ˜¯å¦‚æœæ‰‹æœºé‡å¯äº†ï¼Œå°±éœ€è¦é‡æ–°<strong>è¿æ¥æ•°æ®çº¿</strong>å†æ¬¡å¼€å¯5555ç«¯å£äº†ã€‚</li>
<li>å½“ç„¶å¼€å¯5555ç«¯å£ä¹Ÿå¹¶éå¿…é¡»é€šè¿‡adbï¼Œä¹Ÿæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨æ‰‹æœºä¸Šæ“ä½œæ‰“å¼€ã€‚ä½†è¿™äº›æ–¹æ³•ä¸€èˆ¬éƒ½éœ€è¦rootæƒé™ï¼Œå¦‚æœä½ æƒ³è¦å°è¯•åœ¨æ‰‹æœºä¸Šè¿›è¡Œå¼€å¯ï¼Œè¯·æ³¨æ„å®‰å…¨ã€‚</li>
<li>æœ‰åˆ©å°±æœ‰å¼Šâ€”â€”æ— çº¿è°ƒè¯•è¾ƒæœ‰çº¿è°ƒè¯•è€Œè¨€ï¼Œä¼˜åŠ¿è‡ªä¸å¿…è¯´ï¼Œç¼ºç‚¹æ˜¯æ— çº¿æ•°æ®çš„ä¼ è¾“ä¼šæ¯”æœ‰çº¿è¦æ…¢ä¸€äº›ã€‚</li>
<li>è¿˜æœ‰ä¸€ç‚¹ï¼Œè‡ªä»ç”¨äº†æ— çº¿è°ƒè¯•ä¹‹åï¼Œæˆ‘é‚£å¸¸å¹´æ»¡ç”µçš„æµ‹è¯•æœºï¼Œç°åœ¨éœ€è¦æ—¶ä¸æ—¶çš„è¿›è¡Œå……ç”µäº†~~~<br>o(â•¯â–¡â•°)o</li>
</ol>
<hr>
<p>æœ‰ç”¨çš„é“¾æ¥ï¼š<br><a href="https://developer.android.com/studio/command-line/adb.html" target="_blank" rel="external">https://developer.android.com/studio/command-line/adb.html</a><br><a href="http://stackoverflow.com/questions/23936781/unable-to-connect-android-device-over-adb-tcp-ip" target="_blank" rel="external">http://stackoverflow.com/questions/23936781/unable-to-connect-android-device-over-adb-tcp-ip</a></p>
<hr>
<p>Also in:<br><a href="http://www.barryzhang.com" target="_blank" rel="external">http://www.barryzhang.com</a><br><a href="https://barryhappy.github.io">https://barryhappy.github.io</a><br><a href="http://www.jianshu.com/users/e4607fd59d0d/latest_articles" target="_blank" rel="external">http://www.jianshu.com/users/e4607fd59d0d/latest_articles</a><br><a href="http://blog.csdn.net/barryhappy" target="_blank" rel="external">http://blog.csdn.net/barryhappy</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨è¿›è¡ŒAndroidå¼€å‘æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯ç”¨usbçº¿æŠŠæ‰‹æœºå’Œç”µè„‘è¿æ¥èµ·æ¥è¿›è¡Œè°ƒè¯•å·¥ä½œã€‚ä½†å¦‚æœä½ è§‰å¾—è¿™æ ·ä¸å¤Ÿé…·çš„è¯ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹æ— çº¿è¿æ¥ï¼Œé¢‡ç®€å•ï¼ŒGOï¼&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Androidã€‘WebViewï¼šonReceiveErrorçš„åº”ç”¨ä¸å˜è¿</title>
    <link href="http://barryhappy.github.io/2016/10/02/AndroidWebViewOnReceiveError/"/>
    <id>http://barryhappy.github.io/2016/10/02/AndroidWebViewOnReceiveError/</id>
    <published>2016-10-02T15:53:55.000Z</published>
    <updated>2016-10-09T07:12:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>onReceiveError</code>æ˜¯WebViewClientæä¾›çš„æ–¹æ³•ï¼Œç”¨äºç½‘é¡µäº§ç”Ÿé”™è¯¯æ—¶è¿›è¡Œå›è°ƒå¤„ç†ã€‚</p>
<a id="more"></a>
<h2 id="1-æ—§ç‰ˆçš„onReceiveError"><a href="#1-æ—§ç‰ˆçš„onReceiveError" class="headerlink" title="1. æ—§ç‰ˆçš„onReceiveError"></a>1. æ—§ç‰ˆçš„onReceiveError</h2><p>åœ¨API23ä¹‹å‰ï¼Œè¯¥æ–¹æ³•çš„ç­¾åæ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, <span class="keyword">int</span> errorCode,String description, String failingUrl)</span></span>;</div></pre></td></tr></table></figure>
<p>æ–‡æ¡£æ˜¯ï¼š          </p>
<blockquote>
<p>Report an error to the host application. These errors are unrecoverable (i.e. the main resource is unavailable). The errorCode parameter corresponds to one of the ERROR_* constants.</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼ŒonReceivedErroråªæœ‰åœ¨é‡åˆ°ä¸å¯ç”¨çš„(<strong>unrecoverable</strong>)é”™è¯¯æ—¶ï¼Œæ‰ä¼šè¢«è°ƒç”¨ï¼‰ã€‚<br>æ¯”å¦‚ï¼Œå½“WebViewåŠ è½½é“¾æ¥<em>www.barryzhang.com</em>æ—¶ï¼Œâ€ä¸å¯ç”¨â€çš„æƒ…å†µæœ‰å¯ä»¥åŒ…æ‹¬æœ‰ï¼š</p>
<ul>
<li>æ²¡æœ‰ç½‘ç»œè¿æ¥  </li>
<li>è¿æ¥è¶…æ—¶  </li>
<li>æ‰¾ä¸åˆ°é¡µé¢www.barryzhang.com  </li>
</ul>
<p>è€Œä¸‹é¢çš„æƒ…å†µåˆ™ä¸ä¼šè¢«æŠ¥å‘Šï¼š</p>
<ul>
<li>ç½‘é¡µå†…å¼•ç”¨å…¶ä»–èµ„æºåŠ è½½é”™è¯¯ï¼Œæ¯”å¦‚å›¾ç‰‡ã€cssä¸å¯ç”¨</li>
<li>jsæ‰§è¡Œé”™è¯¯</li>
</ul>
<h2 id="2-åº”ç”¨ï¼šæ˜¾ç¤ºä¸ªè‡ªå®šä¹‰ERRORç•Œé¢"><a href="#2-åº”ç”¨ï¼šæ˜¾ç¤ºä¸ªè‡ªå®šä¹‰ERRORç•Œé¢" class="headerlink" title="2. åº”ç”¨ï¼šæ˜¾ç¤ºä¸ªè‡ªå®šä¹‰ERRORç•Œé¢"></a>2. åº”ç”¨ï¼šæ˜¾ç¤ºä¸ªè‡ªå®šä¹‰ERRORç•Œé¢</h2><p>åŸºäºä»¥ä¸Šç‰¹æ€§ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç”¨æ¥å¤„ç†ç½‘é¡µåŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œæ¯”å¦‚æ˜¾ç¤ºä¸€æ®µå‹å¥½çš„æç¤ºè¯­ã€ä¸€ä¸ªé‡è¯•æŒ‰é’®ç­‰ã€‚<br>æ¯”å¦‚åƒè¿™æ ·ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, <span class="keyword">int</span> errorCode, String description, String failingUrl)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, errorCode, description, failingUrl);</div><div class="line">	layoutError.setVisibility(View.VISIBLE); </div><div class="line">	textViewErrorMessage.setText(<span class="string">"(é”™è¯¯ç :"</span> + errorCode + <span class="string">"  "</span> + description + <span class="string">")"</span>  );</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>â€”â€”è¿™ä¹ˆåšçš„è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯ï¼Œè™½ç„¶é»˜è®¤çš„ç½‘é¡µé”™è¯¯æ ·å¼æ¯ä¸ªROMéƒ½å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯å´æ˜¯ä¸€æ ·çš„ä¸‘â€¦â€¦ï¼Œæ¥ä¸ªå¯¹æ¯”å›¾æ„Ÿå—ä¸€ä¸‹ï¼Œä»å·¦åˆ°å³ä¾æ¬¡æ˜¯ï¼šMIUI(Android5.0.2)ã€Nexus5X(Android7)ã€ä»¥åŠè‡ªå®šä¹‰ä¹‹åçš„æ•ˆæœï¼š<br><img src="http://i.imgur.com/67ovWSv.png" alt="onReceiveErro"></p>
<h2 id="3-æ–°ç‰ˆçš„onReceiveError"><a href="#3-æ–°ç‰ˆçš„onReceiveError" class="headerlink" title="3. æ–°ç‰ˆçš„onReceiveError"></a>3. æ–°ç‰ˆçš„onReceiveError</h2><p>So far so good, but~<br>API23(Android6)ï¼ŒGoogleå¯¹onReceiveErrorè¿›è¡Œäº†ä¸€æ¬¡æ”¹ç‰ˆé‡è½½ï¼Œ<strong>å¹¶ä¸”æŠŠè€ç‰ˆæœ¬çš„åºŸå¼ƒäº†</strong>ï¼Œã„’oã„’~~<br>ç­¾åæ”¹æˆäº†è¿™æ ·ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, WebResourceRequest request, WebResourceError error)</span></span>;</div></pre></td></tr></table></figure></p>
<p>æ–‡æ¡£æ”¹æˆäº†ï¼š          </p>
<blockquote>
<p>Report web resource loading error to the host application. These errors usually indicate inability to connect to the server. Note that unlike the deprecated version of the callback,the new version will be called for any resource (iframe, image, etc), not just for the main page. Thus, it is recommended to perform minimum required work in this callback.</p>
</blockquote>
<p>æ–°ç‰ˆçš„onReceiveErrorèƒ½æ¥æ”¶åˆ°çš„é”™è¯¯æ›´å¤šï¼Œä¸å†å±€é™äºä¹‹å‰çš„â€ä¸å¯ç”¨â€çš„æƒ…å†µâ€”â€”å¥½åƒæ˜¯æ¯”ä¹‹å‰æ›´å¼ºå¤§äº†ã€‚<br>ä½†æ˜¯ï¼Œè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬ä¾ç„¶ç”¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„æ–¹å¼æ¥ä½¿ç”¨æ–°ç‰ˆï¼Œåƒè¿™æ ·ï¼š  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, WebResourceRequest request, WebResourceError error)</span> </span>&#123;</div><div class="line">    <span class="comment">// ï¼ï¼åœ¨æ–°ç‰ˆçš„onReceivedErrorä¸­ï¼Œæ²¿ç”¨ä¹‹å‰çš„å¤„ç†é€»è¾‘ï¼ˆè¿™æ˜¯é”™è¯¯çš„ç¤ºä¾‹ï¼ï¼ï¼‰</span></div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, errorCode, description, failingUrl);</div><div class="line">	layoutError.setVisibility(View.VISIBLE); </div><div class="line">	textViewErrorMessage.setText(<span class="string">"(é”™è¯¯ç :"</span> + error.getErrorCode() + <span class="string">"  "</span> + error.getDescription().toString() + <span class="string">")"</span>  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¼šå¯¼è‡´çš„é—®é¢˜æ˜¯ï¼šåœ¨Android6ä»¥ä¸Šçš„æœºå™¨ä¸Šï¼Œç½‘é¡µä¸­çš„ä»»æ„ä¸€ä¸ªèµ„æºè·å–ä¸åˆ°ï¼ˆæ¯”å¦‚å­—ä½“ï¼‰ï¼Œç½‘é¡µå°±å¾ˆå¯èƒ½æ˜¾ç¤ºè‡ªå®šä¹‰çš„é”™è¯¯ç•Œé¢ã€‚å°¤å…¶æ˜¯å¦‚æœHtmlç”¨äº†æœ¬åœ°åŒ–æŠ€æœ¯ï¼Œâ€™ERR_FILE_NOT_FOUNDâ€™å¼€å§‹å˜å¾—ç‰¹åˆ«å¸¸è§ã€‚</p>
<h2 id="4-å¦‚ä½•åƒåœ¨è€ç‰ˆæœ¬ä¸€æ ·å·¥ä½œï¼Ÿ"><a href="#4-å¦‚ä½•åƒåœ¨è€ç‰ˆæœ¬ä¸€æ ·å·¥ä½œï¼Ÿ" class="headerlink" title="4. å¦‚ä½•åƒåœ¨è€ç‰ˆæœ¬ä¸€æ ·å·¥ä½œï¼Ÿ"></a>4. å¦‚ä½•åƒåœ¨è€ç‰ˆæœ¬ä¸€æ ·å·¥ä½œï¼Ÿ</h2><h3 id="4-1-ç»§ç»­ç”¨è€ç‰ˆæœ¬å‘¢ï¼Ÿ"><a href="#4-1-ç»§ç»­ç”¨è€ç‰ˆæœ¬å‘¢ï¼Ÿ" class="headerlink" title="4.1 ç»§ç»­ç”¨è€ç‰ˆæœ¬å‘¢ï¼Ÿ"></a>4.1 ç»§ç»­ç”¨è€ç‰ˆæœ¬å‘¢ï¼Ÿ</h3><p>Bingoï¼å¯ä»¥ï¼Œèµ·ç ä»ç›®å‰æ¥çœ‹ï¼Œæµ‹è¯•ç»“æœè¡¨æ˜è‡³å°‘åœ¨Andoid6ä»¥åŠAndroid7ä¸Šæ˜¯å¯ä»¥å·¥ä½œçš„ã€‚<br>ç„¶è€Œï¼Œç»ˆç©¶ï¼Œä½¿ç”¨å·²åºŸå¼ƒçš„APIç»ˆç©¶æ˜¯ä¸å¤ªä¼˜é›…â€”â€”è¯´ä¸å®šå“ªä¸ªç‰ˆæœ¬å°±çªç„¶ä¸èƒ½ç”¨äº†ï¼Œä»¿ä½›åƒä¸ªå®šæ—¶ç‚¸å¼¹ä¸€æ ·ã€‚</p>
<h3 id="4-2-isForMainFrame"><a href="#4-2-isForMainFrame" class="headerlink" title="4.2 isForMainFrame"></a>4.2 isForMainFrame</h3><p>æˆ‘ä»¬æ³¨æ„åˆ°æ–°ç‰ˆçš„onReceivedErrorè·Ÿè€ç‰ˆç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ª<code>WebResourceRequest</code>å‚æ•°ï¼Œè€Œ<code>WebResourceRequest</code>æœ‰ä¸€ä¸ªæ–¹æ³•å«åš<code>isForMainFrame</code>ï¼Œæè¿°ä¸ºï¼š</p>
<blockquote>
<p>Gets whether the request was made for the main frame<br>è·å–å½“å‰çš„ç½‘ç»œè¯·æ±‚æ˜¯å¦æ˜¯ä¸º<em>main frame</em>åˆ›å»ºçš„.</p>
</blockquote>
<p>åŠ ä¸Šè¿™ä¸ªæ¡ä»¶åˆ¤æ–­æ˜¯æ¥è¯•è¯•ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, WebResourceRequest request, WebResourceError error)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, errorCode, description, failingUrl);</div><div class="line">	<span class="keyword">if</span>(request.isForMainFrame())&#123;<span class="comment">// åœ¨è¿™é‡ŒåŠ ä¸Šä¸ªåˆ¤æ–­</span></div><div class="line">	    <span class="comment">// æ˜¾ç¤ºé”™è¯¯ç•Œé¢</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®éªŒè¯æ˜è¿™ä¸ªæ–¹æ³•æ˜¯æœ‰æ•ˆçš„ã€‚   </p>
<h3 id="4-3-å½“ç„¶-ä¹Ÿè¿˜æœ‰å…¶ä»–æ–¹æ³•"><a href="#4-3-å½“ç„¶-ä¹Ÿè¿˜æœ‰å…¶ä»–æ–¹æ³•" class="headerlink" title="4.3 å½“ç„¶,ä¹Ÿè¿˜æœ‰å…¶ä»–æ–¹æ³•"></a>4.3 å½“ç„¶,ä¹Ÿè¿˜æœ‰å…¶ä»–æ–¹æ³•</h3><p>å¯ä»¥è¿™æ ·ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, WebResourceRequest request, WebResourceError error)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, errorCode, description, failingUrl);</div><div class="line">	 <span class="keyword">if</span> (request.getUrl().toString() .equals(getUrl())) &#123;<span class="comment">// åœ¨è¿™é‡ŒåŠ ä¸Šä¸ªåˆ¤æ–­</span></div><div class="line">	    <span class="comment">// æ˜¾ç¤ºé”™è¯¯ç•Œé¢</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åŸç†æ˜¯ï¼šç”¨è¯·æ±‚çš„urlæ¥åˆ¤æ–­ï¼Œå¦‚æœå‡ºé”™çš„urlè·ŸwebViewå½“å‰åŠ è½½çš„urlä¸€è‡´ï¼Œå°±æ˜¾ç¤ºé”™è¯¯é¡µé¢ã€‚<br>â†‘â†‘ç»æµ‹è¯•ï¼Œä¹Ÿèƒ½é€šè¿‡~ </p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ€»è€Œè¨€ä¹‹ï¼Œæœ€ç»ˆçš„ä»£ç è¿™æ ·å†™ï¼Œå¯ä»¥åŒæ—¶å…¼å®¹æ–°æ—§ç‰ˆæœ¬ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ—§ç‰ˆæœ¬ï¼Œä¼šåœ¨æ–°ç‰ˆæœ¬ä¸­ä¹Ÿå¯èƒ½è¢«è°ƒç”¨ï¼Œæ‰€ä»¥åŠ ä¸Šä¸€ä¸ªåˆ¤æ–­ï¼Œé˜²æ­¢é‡å¤æ˜¾ç¤º</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, <span class="keyword">int</span> errorCode, String description, String failingUrl)</span> </span>&#123;</div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, errorCode, description, failingUrl);</div><div class="line">	<span class="keyword">if</span>(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M)&#123;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;	</div><div class="line">	<span class="comment">// åœ¨è¿™é‡Œæ˜¾ç¤ºè‡ªå®šä¹‰é”™è¯¯é¡µ</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// æ–°ç‰ˆæœ¬ï¼Œåªä¼šåœ¨Android6åŠä»¥ä¸Šè°ƒç”¨</span></div><div class="line"><span class="meta">@TargetApi</span>(Build.VERSION_CODES.M)</div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceivedError</span><span class="params">(WebView view, WebResourceRequest request, WebResourceError error)</span> </span>&#123; </div><div class="line">	<span class="keyword">super</span>.onReceivedError(view, request, error);</div><div class="line">	<span class="keyword">if</span> (request.isForMainFrame())&#123; <span class="comment">// æˆ–è€…ï¼š if(request.getUrl().toString() .equals(getUrl()))</span></div><div class="line">		<span class="comment">// åœ¨è¿™é‡Œæ˜¾ç¤ºè‡ªå®šä¹‰é”™è¯¯é¡µ</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;onReceiveError&lt;/code&gt;æ˜¯WebViewClientæä¾›çš„æ–¹æ³•ï¼Œç”¨äºç½‘é¡µäº§ç”Ÿé”™è¯¯æ—¶è¿›è¡Œå›è°ƒå¤„ç†ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ã€Androidã€‘ä½ å¯èƒ½è¿˜ä¸çŸ¥é“çš„elevationã€ä»¥åŠZå€¼ç­‰</title>
    <link href="http://barryhappy.github.io/2016/09/27/elevationAndZValue/"/>
    <id>http://barryhappy.github.io/2016/09/27/elevationAndZValue/</id>
    <published>2016-09-27T15:15:57.000Z</published>
    <updated>2016-10-09T07:13:10.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ"></a>elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œwithå’Œheightæ˜¯æ‰€æœ‰Viewçš„åŸºç¡€å±æ€§ã€‚ç”¨ä¸€ä¸ªäºŒç»´åæ ‡ç³»æ¥æè¿°æ‰‹æœºå±å¹•ï¼Œé‚£ä¹ˆå®ƒä»¬å°±åˆ†åˆ«è¡¨ç¤ºäº†Viewåœ¨åæ ‡ç³»ä¸Šxã€yæ–¹å‘ä¸Šå€¼ â€”â€”è¿™æ˜¯æˆ‘ä»¬ä¸€ç›´éƒ½ä¹ æƒ¯çš„è‡ªç„¶è¡¨ç¤ºã€‚<br>ç„¶è€Œï¼Œä»Android5.0(API21)å¼€å§‹ï¼ŒGoogleå¼•å…¥äº†ä¸€ä¸ªzå€¼ï¼ŒæŠŠäºŒç»´åæ ‡ç³»å¼ºè¡Œæ”¹æˆäº†ä¸‰ç»´ã€‚  </p>
<a id="more"></a>
<p>åœ¨Android API21ï¼Œæ–°æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼š<code>android:elevation</code>ï¼Œç”¨ä»¥åœ¨xmlå®šä¹‰Viewçš„æ·±åº¦(é«˜åº¦)ï¼Œä¹Ÿå³zæ–¹å‘çš„å€¼ã€‚<br>é™¤äº†<code>elevation</code>ä¹‹å¤–ï¼Œç±»ä¼¼äºå·²æœ‰çš„translationXã€translationYï¼Œä¹Ÿç›¸å¯¹åº”åœ°æ–°å¢äº†ä¸€ä¸ª<code>translationZ</code>ï¼Œç”¨ä»¥åœ¨å±æ€§åŠ¨ç”»ä¸­åŠ¨æ€æ”¹å˜Zå€¼ï¼ˆä½¿ç”¨View.setTranslationZ()ï¼‰ã€‚ </p>
<blockquote>
<p>Z = elevation + translationZ</p>
</blockquote>
<h2 id="æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ"><a href="#æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ" class="headerlink" title="æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ"></a>æœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ</h2><p>åœ¨å¼•å…¥äº†è¿™ä¸ªå±æ€§ä¹‹åï¼Œä¸»è¦å½±å“æœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>å½±å“Viewçš„é˜´å½±      </li>
<li>å½±å“Viewç›¸äº’é˜»æŒ¡é¡ºåº</li>
</ol>
<h3 id="1-å½±å“Viewçš„é˜´å½±"><a href="#1-å½±å“Viewçš„é˜´å½±" class="headerlink" title="1. å½±å“Viewçš„é˜´å½±"></a>1. å½±å“Viewçš„é˜´å½±</h3><p>Zå€¼ä¼šå¯¹Viewçš„é˜´å½±å¤–è§‚é€ æˆå½±å“ï¼Œä½†æ˜¯ä¸æ˜¯å¯¹Viewå¤§å°é€ æˆå½±å“ã€‚<br>æ‹¥æœ‰æ›´å¤§Zå€¼çš„Viewä¼šæœ‰ä¸€ä¸ªæ›´å¤§ä½†æ˜¯æ›´æŸ”å’Œçš„é˜´å½±â€”â€”è¿™è·Ÿæˆ‘ä»¬ç”Ÿæ´»çš„å®é™…ä½“éªŒæ˜¯ä¸€è‡´çš„ï¼Œå®˜æ–¹ç»™çš„æ•ˆæœå›¾ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/422451-ff967532c79cc51e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é˜´å½±æ•ˆæœ"></p>
<h3 id="2-å½±å“Viewç›¸äº’é˜»æŒ¡é¡ºåº"><a href="#2-å½±å“Viewç›¸äº’é˜»æŒ¡é¡ºåº" class="headerlink" title="2. å½±å“Viewç›¸äº’é˜»æŒ¡é¡ºåº"></a>2. å½±å“Viewç›¸äº’é˜»æŒ¡é¡ºåº</h3><p>æ‹¥æœ‰æ›´å¤§Zå€¼çš„Viewä¼šæŒ¡ä½Zå€¼æ¯”è¾ƒå°çš„Viewâ€”â€”å³æ›´å¤§Zå€¼çš„Viewä¼šåœ¨æœ€ä¸Šå±‚ã€‚<br>è­¬å¦‚ï¼Œåœ¨æ­£å¸¸çš„FrameLayoutä¸­ï¼Œå­Viewçš„ç»˜åˆ¶é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€åä¸€ä¸ªå­Viewä¼šæ˜¾ç¤ºåˆ°æœ€ä¸Šé¢ï¼Œå¦‚æœä½ç½®è·Ÿå‰é¢çš„Viewæœ‰é‡åˆï¼Œåˆ™ä¼šç›–ä½å‰é¢çš„Viewã€‚ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">              <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">              <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">              <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewA"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#f00"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"A"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewB"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#0f0"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"B"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"60dp"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"60dp"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--ViewCæœ‰äº†ä¸€ä¸ªelevationå±æ€§ --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewC"</span></div><div class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"180dp"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#f00"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"C"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:elevation</span>=<span class="string">"1dp"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/viewD"</span></div><div class="line">        <span class="attr">android:background</span>=<span class="string">"#0f0"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"D"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:layout_marginLeft</span>=<span class="string">"240dp"</span></div><div class="line">        <span class="attr">android:layout_marginTop</span>=<span class="string">"60dp"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"100dp"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"100dp"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æ¯”å¦‚ï¼Œä¸Šé¢çš„xmlä»£ç ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/422451-92a1b4c446cf3949.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¯¹æ¯”å›¾"></p>
<ul>
<li>å…ˆçœ‹ViewAã€ViewBï¼Œå› ä¸ºViewBæ˜¯ç¬¬äºŒä¸ªå­Viewï¼ŒViewAæ˜¯ç¬¬ä¸€ä¸ªï¼Œæ‰€ä»¥Bä¼šè¦†ç›–åœ¨Açš„ä¸Šé¢ã€‚ </li>
<li>ç„¶åViewCã€Dï¼Œè·ŸABç›¸æ¯”è¾ƒï¼ŒåŒºåˆ«å°±åœ¨äºViewCå¤šäº†ä¸€ä¸ªelevationå±æ€§ï¼Œæœ‰äº†ä¸€ä¸ªæ¯”ViewDæ›´å¤§çš„Zå€¼ï¼Œæ‰€ä»¥ï¼Œå³ä½¿å®ƒåœ¨ViewDçš„å‰é¢ï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿç›–ä½D~ ï¼ˆViewCï¼šå› ä¸ºæœ•ç«™çš„æ›´é«˜ï¼Œå“‡å“ˆå“ˆ~ ï¼‰</li>
</ul>
<h2 id="è¿˜æœ‰CardView"><a href="#è¿˜æœ‰CardView" class="headerlink" title="è¿˜æœ‰CardView"></a>è¿˜æœ‰CardView</h2><p>ä¸ºä»€ä¹ˆä¼šæåˆ°CardViewå‘¢ï¼Ÿå› ä¸ºCardViewå¯ä»¥ç®—ä½œæ˜¯ä¸€ä¸ªå®˜æ–¹ä½¿ç”¨çš„Zå€¼çš„ç¤ºä¾‹äº†ã€‚ </p>
<blockquote>
<p>CardView æ‰©å±• FrameLayout ç±»åˆ«å¹¶è®©æ‚¨èƒ½å¤Ÿæ˜¾ç¤ºå¡ç‰‡å†…çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨æ•´ä¸ªå¹³å°ä¸­æ‹¥æœ‰ä¸€è‡´çš„å‘ˆç°æ–¹å¼ã€‚CardView å°ç»„ä»¶å¯æ‹¥æœ‰é˜´å½±å’Œåœ†è§’ã€‚</p>
</blockquote>
<p>CardViewæ˜¯åœ¨v7æ”¯æŒåŒ…é‡Œé¢çš„ï¼Œåœ¨API<21æ—¶ï¼Œå®ç°æ–¹å¼æ˜¯padding+ç»˜åˆ¶é˜´å½±ï¼›è€Œåœ¨åœ¨api>=21æ—¶ï¼Œå°±æ˜¯ç”¨elevationå±æ€§æ¥å®ç°çš„å•¦ï¼</21æ—¶ï¼Œå®ç°æ–¹å¼æ˜¯padding+ç»˜åˆ¶é˜´å½±ï¼›è€Œåœ¨åœ¨api></p>
<p>çŸ¥é“äº†è¿™äº›ï¼Œä¹Ÿå¯ä»¥è§£é‡Šä¸€äº›ä»¥å‰è§‰å¾—è¯¡å¼‚çš„Viewè¦†ç›–çš„é—®é¢˜äº†ï¼Œæ¯”å¦‚ï¼šæˆ‘æ˜æ˜åœ¨CardViewçš„ä¸Šå±‚æ”¾äº†ä¸€ä¸ªButtonï¼Œä¸ºä»€ä¹ˆButtonçœ‹ä¸åˆ°äº†ï¼Ÿï¼Ÿï¼Ÿ<br>ï¼ˆå‚»å­©å­ï¼Œå› ä¸ºCardViewé»˜è®¤çš„elevationçš„å‘€ï¼‰</p>
<p><img src="http://upload-images.jianshu.io/upload_images/422451-8b1ee8a52937f10c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<hr>
<p>å¯èƒ½æœ‰ç”¨çš„é“¾æ¥ï¼š<br><a href="https://developer.android.com/training/material/shadows-clipping.html" target="_blank" rel="external">https://developer.android.com/training/material/shadows-clipping.html</a><br><a href="https://developer.android.com/training/material/lists-cards.html" target="_blank" rel="external">https://developer.android.com/training/material/lists-cards.html</a><br><a href="https://developer.android.com/reference/android/support/v7/widget/CardView.html" target="_blank" rel="external">https://developer.android.com/reference/android/support/v7/widget/CardView.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;elevationã€ä»¥åŠZå€¼â€”â€”æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œwithå’Œheightæ˜¯æ‰€æœ‰Viewçš„åŸºç¡€å±æ€§ã€‚ç”¨ä¸€ä¸ªäºŒç»´åæ ‡ç³»æ¥æè¿°æ‰‹æœºå±å¹•ï¼Œé‚£ä¹ˆå®ƒä»¬å°±åˆ†åˆ«è¡¨ç¤ºäº†Viewåœ¨åæ ‡ç³»ä¸Šxã€yæ–¹å‘ä¸Šå€¼ â€”â€”è¿™æ˜¯æˆ‘ä»¬ä¸€ç›´éƒ½ä¹ æƒ¯çš„è‡ªç„¶è¡¨ç¤ºã€‚&lt;br&gt;ç„¶è€Œï¼Œä»Android5.0(API21)å¼€å§‹ï¼ŒGoogleå¼•å…¥äº†ä¸€ä¸ªzå€¼ï¼ŒæŠŠäºŒç»´åæ ‡ç³»å¼ºè¡Œæ”¹æˆäº†ä¸‰ç»´ã€‚  &lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hello-from-hexo</title>
    <link href="http://barryhappy.github.io/2016/08/28/hello-from-hexo/"/>
    <id>http://barryhappy.github.io/2016/08/28/hello-from-hexo/</id>
    <published>2016-08-28T13:51:29.000Z</published>
    <updated>2016-10-09T07:13:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hello , This is from hexo .</p>
<a id="more"></a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hello , This is from hexo .&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
